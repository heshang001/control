"use strict";var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Base=function(t){function o(t,e){_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n.name="Base",n.version="1.0.0",n.author="heshang",n._value=null,t?(n._html=$(t.cloneNode(!0)),n.dom.setAttribute("data-guid",n.guid)):n._html="",n}return _inherits(o,t),_createClass(o,[{key:"dom",get:function(){return this.html?this.html[0]:""}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]),o}(base.ControlEventBase);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Box=function(t){function n(t){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.name="Box",e.version="1.0.0",e.author="heshang",e._html=$('<div data-guid="'+e.guid+'"></div>'),e}return _inherits(n,t),_createClass(n,[{key:"dom",get:function(){return this.html[0]}},{key:"text",set:function(t){this._text=t,this.html.text(t)}}]),n}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Button=function(t){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1];_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n.name="Button",n.version="1.0.0",n.author="heshang",n._text=t,n._html=$('<button class="button" data-guid="'+n.guid+'">'+n.text+"</button>"),n._bindClick(),n}return _inherits(o,t),_createClass(o,[{key:"offClick",value:function(){}},{key:"_bindClick",value:function(){this._html.on("click",function(){this.runEvent(base.EventBase.CLICK,this)}.bind(this))}},{key:"destorySelfProp",value:function(){this._text=null}},{key:"destorySelfEvent",value:function(){this._html.off("click")}},{key:"dom",get:function(){return this._html[0]}},{key:"text",set:function(t){this._text=t,this.html.text(this.text)},get:function(){return this._text}}]),o}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.CheckBox=function(t){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];_classCallCheck(this,i);var o=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return o._html=$("<span></span>"),o.inputDom=$("<input type='checkbox' value=\""+e+'"/>'),o.textDom=$("<span>"+t+"</span>"),o._html.append(o.inputDom),o._html.append(o.textDom),o.value=e,o.controlName=t,o._checked=!1,o._groupName="",o._showType="",o._text=t,o.bindEvent(),o}return _inherits(i,t),_createClass(i,[{key:"bindEvent",value:function(){var t=this;this._html.on("click",function(){t.runEvent(base.EventBase.CLICK),t.checked=!t.checked})}},{key:"destorySelfEvent",value:function(){this._html.off("click")}},{key:"destorySelfProp",value:function(){}},{key:"text",set:function(t){this._text=t,this.textDom.text(t)},get:function(){return this._text}},{key:"groupName",set:function(t){this._groupName=t,this.inputDom.attr("name",t)}},{key:"change",set:function(t){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,t)}},{key:"click",set:function(t){this._stop?this._stop=!1:this.onEvent(base.EventBase.CLICK,t)}},{key:"showType",set:function(t){this.inputDom.addClass(t),this._showType=t}},{key:"checked",get:function(){return this._checked},set:function(t){this.inputDom.prop("checked",t),this._checked=t,this._parent&&this._parent.changeSelectedIndex(this),this.runEvent(base.EventBase.CHANGE)}},{key:"dom",get:function(){return this._html[0]}}]),i}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.CheckGroup=function(t){function o(t,e){_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._selectIndex=[],n._selectItem=[],n._groupName=t,n._html=$("<span></span>"),n}return _inherits(o,t),_createClass(o,[{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"groupName");e.ready(base.Handler.create(function(){this.groupName=n},this))}},{key:"changeSelectedIndex",value:function(t){var e=t.checked,n=this.childList.indexOf(t),o=this._selectIndex.indexOf(n);o<0&&e?this._selectIndex.push(n):!e&&0<=o&&this._selectIndex.splice(o,1),this.selectIndex.sort(),this.runEvent(base.EventBase.CHANGE)}},{key:"addChildOther",value:function(t){t.groupName=this.groupName}},{key:"selectedBool",value:function(t){for(var e=0;e<this.childList.length;e++)this.childList[e].checked=t}},{key:"selectRevert",value:function(){for(var t=0;t<this.childList.length;t++)this.childList[t].checked=!this.childList[t].checked}},{key:"dom",get:function(){return this._html[0]}},{key:"change",set:function(t){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,t)}},{key:"groupName",set:function(t){for(var e=0;e<this.childList.length;e++)this.childList[e].groupName=t},get:function(){return this._groupName}},{key:"selectIndex",get:function(){return this._selectIndex},set:function(t){if(!this.debugger||t instanceof Array){this._selectIndex=t;for(var e=0;e<t.length;e++)this.childList[e]&&(this.childList[e].checked=!1),this.childList[t[e]]&&this.childList[t[e]]&&(this.childList[t[e]].checked=!0)}else console.warn(t+"< is not array")}}]),o}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.ComboBox=function(_control$Base){function _class(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];_classCallCheck(this,_class);var n=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,e));return n.name="ComboBox",n.version="1.0.0",n.author="hehe;",n._html=$('<div class="comboBox"></div>'),n.selectionDom=$('<div class="comboBox-selection"></div>'),n.selectionPlaceholderDom=$('<span class="comboBox-selection-placeholder">请选择</span> '),n.selectionArrowDom=$('<div><i class="comboBox-selection-arrow"></i></div>'),n.selectionDom.append(n.selectionPlaceholderDom),n.selectionDom.append(n.selectionArrowDom),n.selectDropDownDom=$('<div class="comboBox-dropdown"></div>'),n.selectDropDownNotFoundDom=$('<div class="comboBox-dropdown-notfound">无匹配数据</div> '),n.selectOptionDom=$('<ul class="comboBox-dropdown-list"></ul>'),n.selectDropDownLoadDom=$('<div class="comboBox-dropdown-loading">加载中...</div>'),n.selectDropDownDom.append(n.selectDropDownNotFoundDom),n.selectDropDownDom.append(n.selectOptionDom),n.selectDropDownDom.append(n.selectDropDownLoadDom),n._html.append(n.selectionDom),n._html.append(n.selectDropDownDom),n._selectList=t.selectList||[],n._selectNotFoundText=t.selectNotFoundText||"无匹配数据",n._defaultIndex=t.defaultIndex||"",n._comboBoxStyle=t.comboBoxStyle||"",n._curSelectObj={},n._curSelectChildArr=[],n._disUsed=t.disUsed||!1,n._disScroll=t.disScroll||!1,n._renderSelectList(),n._init(),n}return _inherits(_class,_control$Base),_createClass(_class,[{key:"_init",value:function(){this.disUsed=this._disUsed,this.disScroll=this._disScroll,this.comboBoxStyle=this._comboBoxStyle}},{key:"_bindEvent",value:function(){var e=this;this._html.on("click",function(t){t.stopPropagation(),e.runEvent(base.EventBase.CLICK),$(e.selectionDom[0].children[1]).toggleClass("comboBox-transform"),e.selectDropDownDom.slideToggle()}),$(document).on("click",function(){e.selectDropDownDom.slideUp()})}},{key:"_renderSelectList",value:function(){var l=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._selectList;if(this.selectOptionDom.empty(),this.selectDropDownNotFoundDom.text(this._selectNotFoundText),this.selectDropDownLoadDom.css("display","block"),0==a.length)return this.selectDropDownNotFoundDom.css("display","block"),this.selectDropDownLoadDom.css("display","none"),this.selectOptionDom.empty(),this.curSelectObj={name:"",value:""},void this.selectionPlaceholderDom.text("-");this.selectDropDownNotFoundDom.css("display","none");for(var c=!0,t=function(t){var e=a[t],n=e.name,o=e.value,i=e.index,r=e.child,s=$('<li class="comboBox-dropdown-item" data-val="'+o+'">'+n+"</li>");$('<span class="comboBox-arrow">></span>');l._defaultIndex?l._defaultIndex===i&&c&&(l.curSelectObj={name:n,value:o},l.curSelectChildArr=r,s.addClass("comboBox-selectStyle").siblings().removeClass("comboBox-selectStyle"),l.selectionPlaceholderDom.text(n),c=!1):0==t&&(s.addClass("comboBox-selectStyle").siblings().removeClass("comboBox-selectStyle"),l.selectionPlaceholderDom.text(n),l.curSelectObj={name:n,value:o}),l.selectOptionDom.append(s),s.on("click",function(){var t={name:n,val:o};l.curSelectChildArr=r,l.curSelectObj=t,l.selectionPlaceholderDom.text(n),l.runEvent(base.EventBase.CHANGE),n===l.curSelectObj.name&&s.addClass("comboBox-selectStyle").siblings().removeClass("comboBox-selectStyle")}),t==a.length-1&&l.selectDropDownLoadDom.css("display","none")},e=0;e<a.length;e++)t(e)}},{key:"reflexPropSelf",value:function reflexPropSelf(child,reflex){var ListVal=utils.Dom.getAttr(child,"selectList"),NotFoundTextVal=utils.Dom.getAttr(child,"selectNotFoundText"),IndexVal=utils.Dom.getAttr(child,"defaultIndex"),StyleVal=utils.Dom.getAttr(child,"defaultStyle"),disUsedVal=utils.Dom.getAttr(child,"disUsed"),disScrollVal=utils.Dom.getAttr(child,"disScroll");this.selectList=eval(ListVal),this.selectNotFoundText=eval(NotFoundTextVal),this.defaultIndex=eval(IndexVal),this.comboBoxStyle=eval(StyleVal),this.disUsed=eval(disUsedVal),this.disScroll=eval(disScrollVal)}},{key:"destroySelfEvent",value:function(){this._html.off("click"),this._html.off("change")}},{key:"destroySelfProp",value:function(){this._selectList=null,this._selectNotFoundText=null,this._defaultIndex=null,this._comboBoxStyle=null,this._curSelectObj=null,this._curSelectChildArr=null,this._disUsed=null,this._disScroll=null,this._html=null}},{key:"disUsed",get:function(){return this._disUsed},set:function(t){t?(this.selectionDom.addClass("comboBox-disable"),this.selectionArrowDom.css("display","none"),this.selectOptionDom.css("display","none"),this._html.unbind("click")):(this.selectionDom.removeClass("comboBox-disable"),this.selectionArrowDom.css("display","block"),this.selectOptionDom.css("display","block"),this._html.unbind("click"),this._bindEvent())}},{key:"disScroll",get:function(){return this._disScroll},set:function(t){t?(this.selectDropDownDom.css("overflow","hidden"),this.selectOptionDom.css({"overflow-y":"scroll",width:"1000px",height:"150px"})):(this.selectDropDownDom.css("overflow-y","auto"),this.selectOptionDom.css({"overflow-y":"initial"}))}},{key:"comboBoxStyle",set:function(t){switch(t){case control.ComboBox.DEFAULT_STYLE:this.html.addClass("comboBox-defaultStyle");break;default:t?(this.html.removeClass("comboBox-defaultStyle"),this.html.addClass(t)):this.html.addClass("comboBox-defaultStyle")}},get:function(){return this._comboBoxStyle}},{key:"curSelectObj",set:function(t){this._curSelectObj=t,this.selectionPlaceholderDom.text(t.name)},get:function(){return this._curSelectObj}},{key:"curSelectChildArr",get:function(){return this._curSelectChildArr},set:function(t){this._curSelectChildArr=t}},{key:"selectList",get:function(){return this._selectList},set:function(t){this._selectList=[],this.selectOptionDom.empty(),this._selectList=t,this._renderSelectList()}},{key:"selectNotFoundText",set:function(t){this._selectNotFoundText=t,this.selectDropDownNotFoundDom.text(t)},get:function(){return this._selectNotFoundText}},{key:"defaultIndex",set:function(t){this._defaultIndex=t,this._renderSelectList()},get:function(){return this._defaultIndex}},{key:"dom",get:function(){return this._html[0]}}]),_class}(control.Base),control.ComboBox.DEFAULT_STYLE=0;var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Image=function(t){function i(t,e,n){_classCallCheck(this,i);var o=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return o._imgDom=$("<img>"),o._width=t||"0px",o._height=e||"0px",o._imgDom.attr("width",(t||0)+"px"),o._imgDom.attr("height",(e||0)+"px"),o._src="",o._html=$("<span></span>"),t||(o._widthSetted=!1),e||(o._heightSetted=!1),o._html.append(o._imgDom),o._bindEvent(),o}return _inherits(i,t),_createClass(i,[{key:"_bindEvent",value:function(){var e=this;this._imgDom.on("click",function(t){console.log(this),console.log(e)})}},{key:"getPixelData",value:function(t,e){if(!this._src||""===this._src)return null;var n=new Image,o=document.createElement("canvas");n.onload=function(){return this._widthSetted||o.attr("width",this._width+"px"),_this._heightSetted||o.attr("height",this._height+"px"),console.log("width is:",this._width," height is:",this._height),o[0].getContext("2d").getImageDate(t,e,1,1)}}},{key:"reflexPropSelf",value:function(t,e){console.log("child is:::",t);var n=utils.Dom.getAttr(t,"showWidth");n&&""!==n&&(this._widthSetted=!0,this._imgDom.attr("width",n));var o=utils.Dom.getAttr(t,"showHeight");o&&""!==o&&(this._heightSetted=!0,this._imgDom.attr("height",o));var i=utils.Dom.getAttr(t,"showSrc");this._imgDom.attr("src",i)}},{key:"showSrc",get:function(){return this._src},set:function(t){this._src=t,this._imgDom.attr("src",t)}},{key:"showWidth",get:function(){return this._width},set:function(t){this._width=t,this._widthSetted=!0,this._imgDom.attr("width",t)}},{key:"showHeight",get:function(){return this._height},set:function(t){this._height=t,this._heightSetted=!0,this._imgDom.attr("height",t)}}]),i}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.ImgButton=function(t){function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4];_classCallCheck(this,l);var r=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,i));r.name="ImgButton",r.version="1.0.0",r.author="fengche",r._text=o,r._normorl=t,r._over=e,r._down=n,r._bgSrc=t,r._align="left",r._vertical="top",r._divDom=$('<div style="position:absolute">'+r._text+"</div>");var s=$('<button class="button" data-guid="'+r.guid+'" style="position: relative; border: null; padding:0; margin: 0;"></button>');return s.append(r._divDom),r._html=s,r._bindEvent(),r}return _inherits(l,t),_createClass(l,[{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"normorl"),o=utils.Dom.getAttr(t,"over"),i=utils.Dom.getAttr(t,"down"),r=utils.Dom.getAttr(t,"width"),s=utils.Dom.getAttr(t,"height"),l=utils.Dom.getAttr(t,"align"),a=utils.Dom.getAttr(t,"vertical");this.normorl=n,this.over=o,this.down=i,this.width=r,this.height=s,this.align=l,this._bgSrc=n,this.vertical=a}},{key:"offClick",value:function(){}},{key:"_bindEvent",value:function(){this._html.on("click",function(){this.runEvent(base.EventBase.CLICK,this)}.bind(this)),this._html.on("mouseover",function(){this._bgSrc=this._over,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_OVER,this)}.bind(this)),this._html.on("mouseout",function(){this._bgSrc=this._normorl,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_OUT,this)}.bind(this)),this._html.on("mousedown",function(){this._bgSrc=this._down,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_DOWN,this)}.bind(this)),this._html.on("mouseup",function(){this._bgSrc=this._over,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_UP,this)}.bind(this))}},{key:"destorySelfProp",value:function(){this._normorl=null,this._over=null,this._down=null,this._width=null,this._height=null,this._align=null,this._bgSrc=null,this._vertical=null,this._divDom=null,this._html=null}},{key:"destorySelfEvent",value:function(){this._html.off("mouseup").off("mouseout").off("mousedown").off("mouseover").off("click")}},{key:"normorl",set:function(t){this._normorl=t,this._bgSrc=t,this._html.css("background","url("+this._bgSrc+") no-repeat"),this._html.css("background-size","100% 100%")}},{key:"over",set:function(t){this._over=t}},{key:"down",set:function(t){this._down=t}},{key:"width",set:function(t){this._width=t,this._html.css("width",t),this._divDom.css("width",t)},get:function(){return this._width}},{key:"height",set:function(t){this._height=t,this._html.css("height",t)},get:function(){return this._height}},{key:"vertical",set:function(t){if("top"==(this._vertical=t))this._divDom.css("top",0),this._divDom.css("transform","translateY(0)");else if("middle"==t)this._divDom.css("top","50%"),this._divDom.css("transform","translateY(-50%)");else{if("bottom"!=t)return void console.warn("您输入的值有误， 请重新输入");this._divDom.css("top","100%"),this._divDom.css("transform","translateY(-100%)")}},get:function(){return this._vertical}},{key:"align",set:function(t){"left"===t||"center"===t||"right"===t?(this._align=t,this._divDom.css("text-align",t)):console.warn("您输入的值有误， 请重新输入")},get:function(){return this._align}},{key:"mouseout",set:function(t){this._event[base.EventBase.MOUSE_OUT]=t}},{key:"mouseover",set:function(t){this._event[base.EventBase.MOUSE_OVER]=t}},{key:"mousedown",set:function(t){this._event[base.EventBase.MOUSE_DOWN]=t}},{key:"mouseup",set:function(t){this._event[base.EventBase.MOUSE_UP]=t}},{key:"dom",get:function(){return this._html[0]}},{key:"text",set:function(t){this._text=t,this._divDom.text(t)},get:function(){return this._text}}]),l}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Input=function(t){function o(t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));e.name="Input",e.version="1.0.0",e.author="heshang";var n='<span data-guid="'+e.guid+'">\n                        <input type="text"/>\n                    </span>';return e._html=$(n),e}return _inherits(o,t),_createClass(o,[{key:"text",set:function(t){this.html.find("input").val(t)},get:function(){return this.html.find("input").val()}},{key:"dom",get:function(){return this.html[0]}}]),o}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Label=function(t){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1];_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));n.name="Label",n.version="1.0.0",n.author="heshang";return n.vuebox=$('<div id="box_'+n.guid+'"></div>'),n.data={msg:t},n._html='<span data-guid="'+n.guid+'" ref="myBox" @click="click">{{msg}}</span>',n}return _inherits(o,t),_createClass(o,[{key:"checkVue",value:function(){if(!this.vue){var t=this;this.parent?this.parent.dom.appendChild(this.vuebox[0]):document.body.appendChild(this.vuebox[0]),this.vue=new Vue({el:"#box_"+this.guid,template:this.html,data:function(){return t.data},methods:{click:function(){t.runEvent(base.EventBase.CLICK,t)}}})}}},{key:"dom",get:function(){return this.checkVue(),this.vue.$refs.myBox}},{key:"text",set:function(t){this.data.msg=t},get:function(){return this.data.msg}}]),o}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),_get=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(o):void 0};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Menu=function(t){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Array,e=arguments[1],n=arguments[2];_classCallCheck(this,i);var o=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return o.name="Menu",o.version="1.0.0",o.author="lingyan",o._childList=t||[],o._menuType=e||control.Menu.MenuType.APP_MENU,o._acceleratorKeyDic=new Array,o}return _inherits(i,t),_createClass(i,[{key:"_getHtml",value:function(){switch(this._menuType){case control.Menu.MenuType.APP_MENU:this._subDom=$('<ul class="lingyan-appMenu"></ul>');break;case control.Menu.MenuType.RIGHT_MENU:this._subDom=$('<ul class="lingyan-rightMenu"></ul>')}this._html=this._subDom,this._bindEvent()}},{key:"_bindEvent",value:function(){var r=this;window.onkeydown=function(t){if(r._acceleratorKeyDic){var e="";t.altKey&&(e+="alt+"),t.ctrlKey&&(e+="ctrl+"),t.shiftKey&&(e+="shift+"),e+=t.key.toLowerCase(),r._acceleratorKeyDic[e]&&r._acceleratorKeyDic[e].clickFunc();var n=t.key.toLowerCase();for(var o in r._acceleratorKeyDic)o.toLowerCase().includes(n)&&r._acceleratorKeyDic[o]._parent.showItem&&r._acceleratorKeyDic[o].clickFunc()}},this._html.on("blur",function(){if(r._childList){var t=!0,e=!1,n=void 0;try{for(var o,i=r._childList[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.showItem=!1}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}})}},{key:"_getAllKeys",value:function(t){if(t){var e=!0,n=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var s=i.value;s&&s.accelerator&&(this._acceleratorKeyDic[s.accelerator.toLowerCase()]=s),s&&s.childList&&this._getAllKeys(s.childList)}}catch(t){n=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw o}}}}},{key:"addChild",value:function(t){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addChild",this).call(this,t),this._getAllKeys([t])}},{key:"destorySelfProp",value:function(){this._accelerator=null,this._subItems=null,this._acceleratorKeyDic=null,this._menuType=null,this._html=null,this._childList=null,this._subDom=null}},{key:"destorySelfEvent",value:function(){this._html.off("blur")}},{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"menuType");n&&(this._menuType=n),this._getHtml()}},{key:"childList",set:function(t){if(this._childList=t){var e=!0,n=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value._parent=this}}catch(t){n=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw o}}}}},{key:"accelerator",get:function(){return this._accelerator},set:function(t){this._accelerator=t}},{key:"dom",get:function(){return this._html||this._getHtml(),this._html[0]}}]),i}(control.Base),control.Menu.MeunItemType={NORMAL:"normal",SEPARATOR:"separator",SUBMENU:"submenu"},control.Menu.MenuType={APP_MENU:"appMenu",RIGHT_MENU:"rightMenu"},control.Menu.MeunAccelerator={Command:"Cmd",Control:"Ctrl",CommandOrControl:"CmdOrCtrl",Alt:"Alt",Option:"Option",AltGr:"AltGr",Shift:"Shift",Super:"Super"};var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.MenuItem=function(t){function u(t,e,n,o,i,r,s){var l=!(7<arguments.length&&void 0!==arguments[7])||arguments[7],a=arguments[8];_classCallCheck(this,u);var c=_possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,a));return c.name="MenuItem",c.version="1.0.0",c.author="lingyan",c._label=t,c._index=e||1,c._childList=n||[],c._accelerator=r,c._icon=s,c._enable=l||!1,c._type=i||control.Menu.MeunItemType.NORMAL,c._showItem=!1,c._getFocused=!1,c._clickFunc=o,c._getHtml(),c}return _inherits(u,t),_createClass(u,[{key:"_getHtml",value:function(){var t=this;switch(this._type){case control.Menu.MeunItemType.SEPARATOR:this._currentDom=$('<li class="lingyan-separator-menuItem"></li>');break;case control.Menu.MeunItemType.NORMAL:0==this._index?(this._currentDom=$('<li class="lingyan-normal-menuItem-first"><span>'+this.label+"</span></li>"),this._subDom=$('<ul class="lingyan-normal-menu-first"></ul>')):(this._currentDom=$('<li class="lingyan-normal-menuItem"></li>'),this._initStyle(3),this._subDom=$('<ul class="lingyan-normal-menu"></ul>'))}this._subDom&&(this._subDom.hide(),this._currentDom.append(this._subDom)),this._html=this._currentDom,this._bindEvent(),this.clickFunc=function(){0==t.index&&(t._getFocused=!t._getFocused),t._clickFunc&&t._clickFunc,t.showItem=!t._showItem},this._currentDom.on("click",function(){t.clickFunc()})}},{key:"_initStyle",value:function(t){switch(t){case 3:if(this.icon){var e=$('<img src="'+this.icon+'"/>');this._currentDom.append(e)}if(this._currentDom.append($('<span class="lingyan-normal-menuItem-label" style="left: '+(this.icon?40:"10px")+'">'+this.label+"</span>")),this._accelerator&&(this._acceleratorDom=$('<span class="lingyan-normal-menuItem-accelerator">'+this._accelerator+"</span>"),this._currentDom.append(this._acceleratorDom)),this._childList&&0<this._childList.length){var n=$('<span class="lingyan-normal-menuItem-right" style="vertical-align: middle;"></span>');this._currentDom.append(n)}}}},{key:"_bindEvent",value:function(){var t=this;this._currentDom.on("mouseenter",function(){(0==t.index&&t.getFocused||0<t.index)&&(t.showItem=!0)}),this._currentDom.on("mouseleave",function(){t.showItem=!1})}},{key:"addChild",value:function(t){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(t._parent=this)._childList.push(t),t.dom&&this._subDom&&this.type!=control.Menu.MeunItemType.SEPARATOR&&(this._subDom.append(t.dom),this._subDom.css("width",this.maxWidth+"px")),t.setControllerItem(t.guid,t.guid),this.eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"destorySelfProp",value:function(){this._text=null,this._width=null,this._enable=null,this._icon=null,this._accelerator=null,this._type=null,this._clickFunc=null,this._childList=null,this._label=null,this._showItem=null}},{key:"destorySelfEvent",value:function(){this._currentDom.off("click"),this._currentDom.off("mouseenter"),this._currentDom.off("mouseleave")}},{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"label"),o=utils.Dom.getAttr(t,"index"),i=utils.Dom.getAttr(t,"accelerator"),r=utils.Dom.getAttr(t,"icon"),s=utils.Dom.getAttr(t,"enable"),l=utils.Dom.getAttr(t,"type");n&&(this.label=n),o&&(this.index=o),i&&(this.accelerator=i),r&&(this.icon=r),s&&(this.enable=s),l&&(this.type=l),this._getHtml()}},{key:"reflexEventDefault",value:function(t,e){var n=this;utils.Dom.getEvt(t,"click")&&(this.clickFunc=function(){0==n.index&&(n._getFocused=!n._getFocused),n.runEvent(base.EventBase.CLICK),n.showItem=!n._showItem},this._currentDom.on("click",function(){n.clickFunc()}))}},{key:"getFocused",get:function(){return this._getFocused},set:function(t){this._getFocused=t}},{key:"showItem",get:function(){return this._showItem},set:function(t){if(t&&0===this._index){var e=!0,n=!1,o=void 0;try{for(var i,r=this._parent.childList[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.showItem=!1}}catch(t){n=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw o}}}this._showItem=t,this._subDom&&(this._showItem?this._subDom.show():this._subDom.hide())}},{key:"index",get:function(){return this._index},set:function(t){this._index=t}},{key:"label",get:function(){return this._label},set:function(t){this._label=t}},{key:"childList",set:function(t){if((this._childList=t)&&!(t.length<=0)){var e=!0,n=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value._parent=this}}catch(t){n=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw o}}}}},{key:"clickFunc",get:function(){return this._clickFunc},set:function(t){this._clickFunc=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"accelerator",get:function(){return this._accelerator},set:function(t){this._accelerator=t}},{key:"icon",get:function(){return this._icon},set:function(t){this._icon=t}},{key:"enable",get:function(){return this._enable},set:function(t){this._enable=t}},{key:"maxWidth",get:function(){if(!this._childList||this._childList.length<=0)return 0;for(var t=0,e=0;e<this._childList.length;e++){var n=(this._childList[e].label?15*this._childList[e].label.length:0)+(this._childList[e].icon?30:0)+(this._childList[e].accelerator?10*this._childList[e].accelerator.length:0)+50;t<n&&(t=n)}for(var o=0;o<this._childList.length;o++)this._childList[o].width=t;return t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,0!=this._index&&this._subDom&&this._subDom.css("left",this.width-40+"px"),0!=this._index&&this._accelerator&&this._acceleratorDom.css("left",this.width-10*this._accelerator.length-15+"px")}},{key:"dom",get:function(){return this._html[0]}}]),u}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.ProgressBar=function(_control$Base){function _class(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];_classCallCheck(this,_class);var n=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,e));return n.name="ProgressBar",n.version="1.0.0",n.author="hehe;",n._html=$('<div class="progressBar"></div>'),n.progressBgDom=$('<div class="progressBar-bg"></div>'),n.barDom=$('<div class="progressBar-progress"></div>'),n.progressValDom=$('<span class="progressBar-val"></span>'),n.progressBgDom.append(n.barDom),n._html.append(n.progressBgDom),n._html.append(n.progressValDom),n._progressBarStyle=t.progressBarStyle||control.ProgressBar.SINGLECOLOR_STYLE,n._progressValStyle=t.progressValStyle||control.ProgressBar.PERCENTER_STYLE,n._progressVal=t.progressVal||0,n._isShowProgressVal=t.isShowProgressVal||!1,n._progressTime=t.progressTime||1e3,n._progresFlag=0,n._progressDesc=t.progressDesc||"",n.init(),n}return _inherits(_class,_control$Base),_createClass(_class,[{key:"init",value:function(){this.progressBarStyle=this._progressBarStyle,this.progressValStyle=this._progressValStyle,this.progressVal=this._progressVal,this.isShowProgressVal=this._isShowProgressVal}},{key:"reflexPropSelf",value:function reflexPropSelf(child,reflex){var progressVal=utils.Dom.getAttr(child,"progressVal"),isShowProgressVal=utils.Dom.getAttr(child,"isShowProgressVal"),progressTimeVal=utils.Dom.getAttr(child,"progressTime"),progressBarStyleVal=utils.Dom.getAttr(child,"progressBarStyle"),progressValStyleVal=utils.Dom.getAttr(child,"progressValStyle"),progressDescVal=utils.Dom.getAttr(child,"progressDesc");this.progressVal=eval(progressVal),this.isShowProgressVal=eval(isShowProgressVal),this.progressTime=eval(progressTimeVal),this.progressBarStyle=eval(progressBarStyleVal),this.progressValStyle=eval(progressValStyleVal),this.progressDesc=eval(progressDescVal)}},{key:"destroySelfEvent",value:function(){this._html.off("change")}},{key:"destroySelfProp",value:function(){this._progressBarStyle=null,this._progressValStyle=null,this._progressVal=null,this._isShowProgressVal=null,this._progressTime=null,this._progresFlag=null,this._progressDesc=null,this._html=null}},{key:"progresFlag",get:function(){return this._progresFlag}},{key:"progressDesc",get:function(){return this._progressDesc||""},set:function(t){this._progressDesc=t,this.progressValDom.text(t+this._progresFlag+"%")}},{key:"isShowProgressVal",get:function(){return this._isShowProgressVal},set:function(t){var e=(this._isShowProgressVal=t)?"none":"block";this.progressValDom.css("display",e)}},{key:"progressVal",get:function(){return this._progressVal},set:function(t){var e,n=this,o=this._progressVal;this._progressVal=100<t?100:t,e=o!=this.progressVal?Math.abs(this.progressVal-o):this.progressVal;var i=parseInt(this._progressTime/e)||500,r=setInterval(function(){n._progresFlag!=n._progressVal?(n._progresFlag>n._progressVal?--n._progresFlag:n._progresFlag<n._progressVal&&++n._progresFlag,n.runEvent(base.EventBase.CHANGE),n.progressValDom.text(n.progressDesc+n._progresFlag+"%"),n.barDom.stop(),n.progressValDom.stop()):clearInterval(r)},i);setTimeout(function(){n.barDom.css({width:n.html.width()*(n._progressVal/100),"transition-duration":n._progressTime/1e3+"s"}),n._progressValStyle==control.ProgressBar.PERCENTER_STYLE&&n.progressValDom.css({left:n.html.width()*(n._progressVal/100)-20,"transition-duration":n._progressTime/1e3+"s"})},0)}},{key:"progressBarStyle",set:function(t){switch(t-0){case control.ProgressBar.SINGLECOLOR_STYLE:this.html.removeClass("progressBar-barStyle-Gradual"),this.html.addClass("progressBar-barStyle-singleColor");break;case control.ProgressBar.GRADUAL_STYLE:this.html.removeClass("progressBar-barStyle-singleColor"),this.html.addClass("progressBar-barStyle-Gradual");break;default:this.html.addClass("progressBar-barStyle-singleColor")}}},{key:"progressValStyle",set:function(t){switch(t){case control.ProgressBar.PERTOP_STYLE:this.progressValDom.removeClass("progressBar-percentStyle-center progressBar-percentStyle-right"),this.progressValDom.addClass("progressBar-percentStyle-top");break;case control.ProgressBar.PERCENTER_STYLE:this.progressValDom.removeClass("progressBar-percentStyle-top progressBar-percentStyle-right"),this.progressValDom.addClass("progressBar-percentStyle-center");break;case control.ProgressBar.PERRIGHT_STYLE:this.progressValDom.removeClass("progressBar-percentStyle-top progressBar-percentStyle-center"),this.progressValDom.addClass("progressBar-percentStyle-right");break;default:t?(console.log(t),this.progressValDom.removeClass("progressBar-percentStyle-top progressBar-percentStyle-center progressBar-percentStyle-right"),this.progressValDom.addClass(t)):(console.log(t),this.progressValDom.addClass("progressBar-percentStyle-top"))}}},{key:"change",set:function(t){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,t)}},{key:"dom",get:function(){return this._html[0]}}]),_class}(control.Base),control.ProgressBar.SINGLECOLOR_STYLE=1,control.ProgressBar.GRADUAL_STYLE=2,control.ProgressBar.PERTOP_STYLE=1,control.ProgressBar.PERCENTER_STYLE=2,control.ProgressBar.PERRIGHT_STYLE=3;var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Radio=function(t){function r(t,e,n){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));o.name="Radio",o.version="1.0.0",o.author="heshang",o._selected=!1,o._groupName="",o.textDom=$("<span>"+o.text+"</span>"),o.inputDom=$('<input type="radio" value="'+o._value+'"/>');var i=$("<span></span>");return i.append(o.inputDom),i.append(o.textDom),o._html=i,o.value=e,o.text=t,o._bindEvent(),o}return _inherits(r,t),_createClass(r,[{key:"_bindEvent",value:function(){var t=this;this.inputDom.on("change",function(){t.changeParentPro()})}},{key:"changeParentPro",value:function(){this.parent instanceof control.RadioGroup&&(this.parent.selectIndex=this.parent.childList.indexOf(this),(this.parent.selectItem=this).parent.disChange())}},{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"value");this.value=n}},{key:"selected",set:function(t){t?this.inputDom.attr("checked","checked"):this.inputDom.removeAttr("checked"),this._selected=t},get:function(){return this._selected}},{key:"value",get:function(){return this._value},set:function(t){this.inputDom.val(t),this._value=t}},{key:"groupName",set:function(t){this.inputDom.attr("name",t),this._groupName=t}},{key:"dom",get:function(){return this._html[0]}},{key:"text",get:function(){return this._text},set:function(t){this.textDom.text(t),this._text=t}}]),r}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.RadioGroup=function(t){function o(t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));e.name="Radio",e.version="1.0.0",e.author="heshang",e._selectIndex=-1,e._selectItem=null;var n=$("<span></span>");return e._html=n,e._groupName="",e}return _inherits(o,t),_createClass(o,[{key:"disChange",value:function(){this.runEvent(base.EventBase.CHANGE)}},{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"name"),o=utils.Dom.getAttr(t,"selectIndex");e.ready(base.Handler.create(function(){this.groupName=n,o&&(this.selectIndex=o)},this,"加载完成"))}},{key:"selectIndex",set:function(t){t<this.childList.length?(this._selectIndex=t,this._selectItem=this.childList[t],this.selectItem.selected=!0):this.debugger&&console.warn("radioGroup guid:"+this.guid+" childList length:"+this.childList.length+",set index:"+t)},get:function(){return this._selectIndex}},{key:"selectItem",set:function(t){var e=this.childList.indexOf(t);0<=e&&(this.selectIndex=e)},get:function(){return this._selectItem}},{key:"groupName",set:function(t){for(var e=0;e<this.childList.length;e++)this.childList[e]instanceof control.Radio&&(this.childList[e].groupName=t);this._groupName=t}},{key:"dom",get:function(){return this._html[0]}},{key:"text",get:function(){return this._text},set:function(t){this._text=t}}]),o}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Slider=function(t){function a(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{width:394,height:24},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{width:400,height:30},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{width:40,height:40},r=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],s=arguments[6];_classCallCheck(this,a);var l=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,s));return l.name="Slider",l.version="1.0.0",l.author="liaohen",l._direction=t,l._value=e,l._innerSize=n,l._outerSize=o,l._sliderSize=i,l._heartShow=r,l._outerDom=$("<div></div>"),l._innerDom=$("<div></div>"),l._heartDom=$("<div></div>"),l._sliderDom=$("<div></div>"),l._heartDom.append(l._sliderDom),l._innerDom.append(l._heartDom),l._outerDom.append(l._innerDom),l._heartSize={width:Number.parseInt(.05*n.width),height:2*Math.ceil(Number.parseInt(.8*n.height)/2)},l._bindEvent(),l._sizeInit(),l._valInit(),l}return _inherits(a,t),_createClass(a,[{key:"_bindEvent",value:function(){var s=this,o=void 0,i=void 0,r=void 0,l=void 0,a=null;this._sliderDom[0].addEventListener("mousedown",function(t){s._heartDom[0].style.transition="none",s._sliderDom[0].style.transition="none",o=t.clientX-s._sliderDom[0].offsetLeft,i=t.clientY-s._sliderDom[0].offsetLeft,r=s._sliderDom[0],l=s._heartDom[0],a=s._outerDom[0].offsetWidth-s._sliderDom[0].offsetWidth/2;var e=function(t){if(t.preventDefault(),s._direction){var e=t.clientX-o;e<0?e=0:a<e&&(e=a),r.style.left=e+"px",l.style.width=e+"px"}else{var n=t.clientY-i;n<0?n=0:a<n&&(n=a),r.style.left=n+"px",l.style.width=n+"px"}s._value=Number.parseInt(100*l.offsetWidth/a),s.runEvent(base.EventBase.CHANGE,s)};document.addEventListener("mousemove",e,!1),document.addEventListener("mouseup",function(t){s.runEvent(base.EventBase.CHANGE,s),r=l=null,document.removeEventListener("mousemove",e,!1),t.preventDefault()},!1)},!1),this._outerDom[0].addEventListener("mousedown",function(t){a=s._outerDom[0].offsetWidth-s._sliderDom[0].offsetWidth/2;var e=t.clientX-s._heartDom[0].getBoundingClientRect().left<0?0:t.clientX-s._heartDom[0].getBoundingClientRect().left,n=t.clientY-s._heartDom[0].getBoundingClientRect().top<0?0:t.clientY-s._heartDom[0].getBoundingClientRect().top,o=s._sliderDom[0].offsetLeft,i=o+s._sliderDom[0].offsetWidth,r=function(t,e){return 100<Number.parseInt(100*t/e)?100:0<Number.parseInt(100*t/e)?Number.parseInt(100*t/e):0};s._direction?(e<o||i<e)&&(s._sliderDom[0].style.left=e+"px",s._heartDom[0].style.width=e+"px",s._heartDom[0].style.transition="0.5s",s._sliderDom[0].style.transition="0.5s",s._value=r(e,a)):(n<o||i<n)&&(s._sliderDom[0].style.left=n+"px",s._heartDom[0].style.width=n+"px",s._heartDom[0].style.transition="0.5s",s._sliderDom[0].style.transition="0.5s",s._value=r(n,a)),s.runEvent(base.EventBase.CHANGE,s)})}},{key:"_sizeInit",value:function(){var t=["width:"+this._innerSize.width+"px;height:"+this._innerSize.height+"px;","width:"+this._outerSize.width+"px;height:"+this._outerSize.height+"px;","width:"+this._sliderSize.width+"px;height:"+this._sliderSize.height+"px;","width:"+this._heartSize.width+"px;height:"+this._heartSize.height+"px;"];this._innerDom[0].style.cssText=t[0],this._outerDom[0].style.cssText=t[1],this._sliderDom[0].style.cssText=t[2],this._heartDom[0].style.cssText=t[3],this._innerDom.addClass("normal_inner"),this._outerDom.addClass("normal_outer"),this._sliderDom.addClass("normal_slider"),this._heartDom.addClass("normal_heart"),this._direction||this._outerDom.addClass("VERTICAL_SHOW"),this._heartShow||this._heartDom.addClass("HEART_SHOW")}},{key:"_valInit",value:function(){this._heartSize.width=this._innerSize.width*this._value/100,this._heartDom[0].style.width=this._value+"%";var t=this._sliderSize.width/2;this._sliderDom[0].style.left=Number.parseInt(this._heartSize.width-t)+"px"}},{key:"destorySelfProp",value:function(){this._direction=null,this._value=null,this._innerSize=null,this._outerSize=null,this._sliderSize=null,this._heartShow=null,this._outerDom=null,this._innerDom=null,this._heartDom=null,this._sliderDom=null,this._heartSize=null}},{key:"destorySelfEvent",value:function(){this._sliderDom.off("mousedown"),this._outerDom.off("mousedown")}},{key:"change",set:function(t){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,t)}},{key:"width",get:function(){return this._outerDom[0].offsetWidth},set:function(t){return null}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=Boolean(t),this._direction?this._outerDom.removeClass("VERTICAL_SHOW"):this._outerDom.addClass("VERTICAL_SHOW")}},{key:"value",get:function(){return this._value},set:function(t){this._value=100<Number.parseInt(t)?100:Number.parseInt(t)<0?0:Number.parseInt(t),this._valInit(),this.runEvent(base.EventBase.CHANGE,this)}},{key:"outerSize",get:function(){return this._outerSize},set:function(t){var e=[t.width,t.height];this._outerSize.width=e[0],this._outerSize.height=e[1],this._outerDom[0].style.cssText="width:"+this._outerSize.width+"px;height:"+this._outerSize.height+"px;",this._outerDom.addClass("normal_outer")}},{key:"innerSize",get:function(){return this._innerSize},set:function(t){var e=[t.width,t.height];this._innerSize.width=e[0],this._innerSize.height=e[1],this._innerDom[0].style.cssText="width:"+this._innerSize.width+"px;height:"+this._innerSize.height+"px;",this._innerDom.addClass("normal_inner")}},{key:"sliderSize",get:function(){return this._sliderSize},set:function(t){var e=[t.width,t.height];this._sliderSize.width=e[0],this._outerSize.height=e[1],this._sliderDom[0].style.cssText="width:"+this._sliderSize.width+"px;height:"+this._sliderSize.height+"px;",this._sliderDom.addClass("normal_slider")}},{key:"heartShow",get:function(){return this._heartShow},set:function(t){this._heartShow=Boolean(t),this._heartShow?this._heartDom.removeClass("HEART_SHOW"):this._heartDom.addClass("HEART_SHOW")}},{key:"innerStyle",set:function(t){this._innerDom.addClass(t)}},{key:"outerStyle",set:function(t){this._outerDom.addClass(t)}},{key:"sliderStyle",set:function(t){this._sliderDom.addClass(t)}},{key:"heartStyle",set:function(t){this._heartDom.addClass(t)}},{key:"dom",get:function(){return this._outerDom[0]}}]),a}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.TextBox=function(t){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"string",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];_classCallCheck(this,i);var o=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));if(o._val=e,!control.TextBox.textType[t])throw new TypeError("应该输入有效的类型(float,int,string,password,text,number)");return o._regex="",o._testReg=!1,o._showType=t,o._inputDom=$("<input type='"+control.TextBox.textType[o._showType]+"' value='"+o._val+"'/>"),o._html=$("<span></span>"),o._html.append(o._inputDom),o._bindEvent(),o}return _inherits(i,t),_createClass(i,[{key:"destroySelfEvent",value:function(){this._inputDom.off("mousewheel"),this._inputDom.off("change"),this._inputDom.off("input propertychange")}},{key:"destroySelfProp",value:function(){this._val=null,this._regex=null,this._showType=null}},{key:"_bindEvent",value:function(){var n=this;this._inputDom.on("mousewheel",function(t){if("number"===n._inputDom.attr("type")){var e=parseInt(n._inputDom.attr("value"));n._inputDom.attr("value",e+parseInt(t.originalEvent.wheelDeltaY/120))}}),this._inputDom.on("change",function(t){n._val=t.target.value,n.runEvent(base.EventBase.CHANGE,n)}),this._inputDom.on("input propertychange",function(t){n._val=t.target.value,n.runEvent(base.EventBase.CHANGE,n)})}},{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"showType");this._inputDom.attr("type",control.TextBox.textType[n]);var o=utils.Dom.getAttr(t,"showValue");this._inputDom.attr("value",o);var i=utils.Dom.getAttr(t,"minValue");this._inputDom.attr("min",i);var r=utils.Dom.getAttr(t,"maxValue");this._inputDom.attr("max",r);var s=utils.Dom.getAttr(t,"testReg");this._testReg=s}},{key:"testReg",get:function(){return this._testReg},set:function(t){this._testReg=t}},{key:"regex",get:function(){return this._regex},set:function(t){this._regex=t}},{key:"showType",get:function(){return this._showType},set:function(t){this._inputDom.attr("type",control.TextBox.textType[t]),this._showType=t}},{key:"showValue",get:function(){return this._val},set:function(t){this._val=t,this._inputDom.attr("value",t)}},{key:"minValue",get:function(){return"number"!==this._inputDom.attr("type")?NaN:parseInt(this._inputDom.attr("min"))},set:function(t){"number"===this._inputDom.attr("type")&&this._inputDom.attr("min",t)}},{key:"maxValue",get:function(){return"number"!==this._inputDom.attr("type")?NaN:parseInt(this._inputDom.attr("max"))},set:function(t){"number"===this._inputDom.attr("type")&&this._inputDom.attr("max",t)}},{key:"dom",get:function(){return this._html[0]}}]),i}(control.Base),control.TextBox.textType={float:"number",int:"number",string:"text",password:"password",text:"text",number:"number"};var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.Tree=function(t){function n(t){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.name="Tree",e.version="1.0.0",e.author="taiduo",e._rootNode=null,e._selectItem=null,e._selectPrevItem=null,e._selectClickItem=null,e._html=$('<div class="controlTree"></div>'),e._bindEvent(),e}return _inherits(n,t),_createClass(n,[{key:"addChild",value:function(t){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(t._parent=this)._childList.push(t),t.dom&&this.dom&&this.dom.appendChild(t.dom),t.setControllerItem(t.guid,t.guid),(t._rootNode=this).eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"_bindEvent",value:function(){this.html.on("click",function(t){this._stopEvent(t)||this.runEvent(base.EventBase.CLICK,this)}.bind(this)),this.html.on("dblclick",function(t){this._stopEvent(t)||this.runEvent(base.EventBase.DBLCLICK,this)}.bind(this)),this.html.on("contextmenu",function(t){this._stopEvent(t)||this.runEvent(base.EventBase.CONTEXTMENU,this)}.bind(this));var e=this;this.html.on("mousedown",function(t){this._stopEvent(t)||(e.runEvent(base.EventBase.DRAGBEGIN,e),document.onmousemove=function(t){e.runEvent(base.EventBase.DRAGMOVE,e)},document.onmouseup=function(){e.runEvent(base.EventBase.DRAGEND,e),document.onmousemove=null,document.onmouseup=null})}.bind(this))}},{key:"_stopEvent",value:function(t){var e=t||window.event;e.target||e.srcElement;if(-1!=t.target.className.indexOf("spreadList"))return 1}},{key:"destroySelfEvent",value:function(){this._html.off("click"),this._html.off("dblclick"),this._html.off("contextmenu"),this._html.off("mousedown")}},{key:"destroySelfProp",value:function(){this._selectItem=null,this._selectPrevItem=null,this._selectClickItem=null,this._html=null}},{key:"selectItem",set:function(t){this._selectItem=t},get:function(){return this._selectItem}},{key:"selectPrevItem",set:function(t){this._selectPrevItem=t},get:function(){return this._selectPrevItem}},{key:"dom",get:function(){var t="";return this.html&&(t=this.html[0]),t}}],[{key:"initTargetNd",value:function(t,e,n){var o=window.currentTreeItem||null;"click"==n?(e._selectClickItem&&(e.selectPrevItem=e._selectClickItem),e._selectClickItem=o):e.selectItem=o}}]),n}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.TreeItem=function(t){function s(t,e){_classCallCheck(this,s);var n=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t));n.name="TreeItem",n.version="1.0.0",n.author="taiduo",n._config=e||{},n._icon=n._config.icon||null,n._text=n._config.text||null,n._spreadBtn=n._config.spreadBtn||null;var o=control.TreeItem;n._rootNode=null,n._treeIconNd=$(o.createIcon(n._icon)),n._treeSpreadBtnNd=$(o.createSpreadBtn(n._spreadBtn)),n._treeTextNd=$("<span>"+n._text+"</span>");var i=$('<div class="controlTree-context" ></div>');i.prepend(n._treeIconNd),i.append(n._treeTextNd),i.append(n._treeSpreadBtnNd),n._tree=i;var r=$('<div class="controlTree-main"></div>');return r.append(i),n._html=r,n._bindClick(),n._bindEvent(),n}return _inherits(s,t),_createClass(s,[{key:"addChild",value:function(t){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(t._parent=this)._childList.push(t),t.dom&&this.dom&&this.dom.appendChild(t.dom),t.setControllerItem(t.guid,t.guid),t._rootNode=this._rootNode,this.eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"reflexPropSelf",value:function(t,e){var n=utils.Dom.getAttr(t,"icon");this.icon=n;var o=utils.Dom.getAttr(t,"spreadBtn");this.spreadBtn=o}},{key:"_bindClick",value:function(){var t=this._treeSpreadBtnNd;t&&t.on("click",function(t){this.spreadTree()}.bind(this))}},{key:"_bindEvent",value:function(){this.tree.on("click",function(){this.saveCurrent("click")}.bind(this)),this.tree.on("dblclick",function(){this.saveCurrent("dblclick")}.bind(this)),this.tree.on("contextmenu",function(){this.saveCurrent("contextmenu")}.bind(this)),this.tree.on("mousedown",function(){this.saveCurrent("mousedown"),document.onmousemove=function(t){},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}.bind(this))}},{key:"saveCurrent",value:function(t){var e=this._rootNode;"click"==t?(e._selectClickItem&&(e.selectPrevItem=e._selectClickItem),e._selectClickItem=this):e.selectItem=this}},{key:"spreadTree",value:function(){var t=this._treeSpreadBtnNd;t.hasClass("active")?(t.removeClass("active"),this.childList.forEach(function(t){t._html.show()})):(this.childList.forEach(function(t){t._html.hide()}),t.addClass("active"))}},{key:"treeStyle",value:function(t,e){t.constructor==Object?this.tree.css(t):this.tree.css(t,e)}},{key:"destroySelfEvent",value:function(){this._treeSpreadBtnNd.off("click"),this.tree.off("click"),this.tree.off("dblclick"),this.tree.off("contextmenu"),this.tree.off("mousedown")}},{key:"destroySelfProp",value:function(){this._config={},this._icon=null,this._text=null,this._spreadBtn=null,this._treeIconNd=null,this._treeSpreadBtnNd=null,this._treeTextNd=null,this._tree=null,this._html=null}},{key:"tree",set:function(t){this._tree=tree},get:function(){return this._tree}},{key:"text",set:function(t){this._text=t,this._treeTextNd.text(t)},get:function(){return this._text}},{key:"icon",set:function(t){this._icon=t,this._treeIconNd=$(control.TreeItem.createIcon(t)),this.tree.prepend(this._treeIconNd)}},{key:"spreadBtn",set:function(t){this._spreadBtn=t,this._treeSpreadBtnNd=$(control.TreeItem.createSpreadBtn(t)),this.tree.append(this._treeSpreadBtnNd),this._bindClick()}},{key:"dom",get:function(){var t="";return this.html&&(t=this.html[0]),t}}],[{key:"createIcon",value:function(t){var e=null;return t&&(e="<img src="+{rhombus:"./images/rhombus.png",triangleRight:"./images/triangle-right.png"}[t]+"    />"),e}},{key:"createSpreadBtn",value:function(t){var e=null;return t&&(e='<span class="spreadList"></span>'),e}}]),s}(control.Base);var _createClass=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}control.UploadFile=function(t){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"选择文件",e=arguments[1];_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._text="",n.name="Box",n.version="1.0.0",n.author="heshang",n._box=$("<div></div>"),n._html=$('<span class="UploadFile_color UploadFile_inline">'+t+"</span>"),n._submit=$('<span class="UploadFile_color UploadFile_inline">上传</span>'),n._tips=$("<div></div>"),n._box.css("margin","33px"),n._tips.css("marginTop","33px"),n._input=$('<input type="file"/>'),n._box.append(n._html),n._box.append(n._submit),n._box.append(n._tips),n._multiple=!1,n._upFileType=[],n._allowSubmit=!1,n._uploadIndex=0,n._maxSize=null,n.allowSubmit=!1,n.text=t,n._bindEvent(),n}return _inherits(o,t),_createClass(o,[{key:"_bindEvent",value:function(){var t=this;this._html.on("click",function(){t._input[0].click()}),this._submit.on("click",function(){t._submitFile()}),this._input.on("change",function(){t._selectedFile()})}},{key:"_uploadFinish",value:function(){this.allowSubmit=!1}},{key:"_uploadFile",value:function(){var i=this;if(this._uploadIndex>=this._input[0].files.length)this._uploadFinish();else{var r=this._input[0].files[this._uploadIndex],s=new FormData,t="";t=window.location.origin.indexOf("66rpg.com")<=-1?"http://role6-test-www.66rpg.com":window.location.origin,utils.Ajax.get(t+"/ajax/OssAuth/getUploadTempAuth",null,function(t){var o=t.data,e=new FileReader;e.readAsArrayBuffer(r),e.onload=function(t){var e=md5(t.target.result),n="upload/"+e.substr(0,2)+"/"+e;"audio/mp3"===r.type&&(n+=".mp3"),s.append("key",n),s.append("policy",o.policy),s.append("OSSAccessKeyId",o.accessid),s.append("signature",o.signature),s.append("x-oss-security-token",o.token),s.append("name",r.name),s.append("file",r),utils.Ajax.postFormData("//cg-back.cgyouxi.com/",s,function(t){i._tips.append($("<div>文件:<b>"+r.name+"</b>上传成功,链接: <b>http://"+o.cdn+"/"+n+"</b></div>")),i._nextUpLoad()},function(){i._tips.append($('<div>文件:<b style="color:red">'+r.name+"</b>上传失败。请重试。</div>")),i._nextUpLoad()})}})}}},{key:"_nextUpLoad",value:function(){this._uploadIndex++,this._uploadFile()}},{key:"_submitFile",value:function(){this._allowSubmit&&(this._uploadIndex=0,this._tips.html(""),this._uploadFile())}},{key:"_selectedFile",value:function(){if(this.allowSubmit=!1,this._tips.html(""),0<this._input[0].files.length)return this.checkFileType?(this.allowSubmit=!0,void this._selectedFileTips()):void this._typeError();this.allowSubmit=!1}},{key:"_typeError",value:function(){alert("请检查文件类型、文件大小。")}},{key:"_selectedFileTips",value:function(){this._tips.html("");for(var t=0;t<this._input[0].files.length;t++)this._tips.append($("<div>已选择文件:<b>"+this._input[0].files[t].name+"</b></div>"))}},{key:"maxSize",set:function(t){this._maxSize=t},get:function(){return this._maxSize}},{key:"checkFileType",get:function(){for(var t=0;t<this._input[0].files.length;t++){var e=this._input[0].files[t].type;if(this.maxSize&&0<this.maxSize&&this._input[0].files[t].size>=this.maxSize)return!1;if(-1<this._upFileType.indexOf(e.toLowerCase()))return!0}return!1}},{key:"allowSubmit",set:function(t){(this._allowSubmit=t)?this._submit.removeClass("UploadFile_disable").addClass("UploadFile_color"):this._submit.removeClass("UploadFile_color").addClass("UploadFile_disable")}},{key:"upFileType",set:function(t){this._upFileType=t}},{key:"multiple",set:function(t){(this._multiple=t)?this._input.attr("multiple","true"):this._input.removeAttr("multiple")},get:function(){return this._multiple}},{key:"change",set:function(t){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,t)}},{key:"text",set:function(t){this._text=t},get:function(){return this._text}},{key:"dom",get:function(){return this._box[0]}}]),o}(control.Base);