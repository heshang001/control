"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var base={},control={},compents={},utils={},errlog={};base.Controller=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getItemById",value:function(e){return this.boxObj[e]}},{key:"setItemById",value:function(e,t){this.boxObj[e]=t}},{key:"delItemById",value:function(e){delete this.boxObj[e]}}]),e}(),base.Controller.boxObj={},base.EventPrope=function(){function e(){_classCallCheck(this,e),this.debugger=!0,base.EventPrope.control_un_id++,this._name="",this._version="0.0.1",this._author="",this._guid="control_"+base.EventPrope.control_un_id,this._tempDomStr="",this._width=100,this._height=50,this._style="",this._html="",this._visibility="visible",this._zindex=0,this._tabindex=0}return _createClass(e,[{key:"changeStyleStr",value:function(){}},{key:"setControllerItem",value:function(e,t){base.Controller.delItemById(e),base.Controller.setItemById(t,this),this.dom&&this.dom.setAttribute("data-guid",this._guid)}},{key:"tabindex",set:function(e){this._tabindex=e},get:function(){return this._tabindex}},{key:"dom",get:function(){return""}},{key:"html",get:function(){return this._html}},{key:"guid",get:function(){return this._guid},set:function(e){this.guid==e&&""==this.guid||(this.setControllerItem(this._guid,e),this._guid=e)}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"version",get:function(){return this._version},set:function(e){this._version=e}},{key:"author",get:function(){return this._author},set:function(e){this._author=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),e}(),base.EventPrope.control_un_id=0;var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}base.DomCacheRefresh=function(){function e(){_classCallCheck(this,e),this.styleList=[],this.tempT=null,this.freshNum=0,this.startFreshCount=100,this.delayMs=20}return _createClass(e,[{key:"addStyle",value:function(e,t,n){if(!this.styleList[e.guid]){var i={};for(var s in e.dom.style)e.dom.style[s]&&"function"!=typeof e.dom.style[s]&&(i[s]=e.dom.style[s]);this.styleList[e.guid]={control:e,style:i}}if("string"==typeof t)this.styleList[e.guid].style[t]=n;else for(var o in t)this.styleList[e.guid].style[o]=t[o];this.startRefresh()}},{key:"startRefresh",value:function(){this.freshNum++,this.freshNum>=this.startFreshCount?this.fresh():(clearTimeout(this.tempT),this.tempT=setTimeout(function(){this.fresh()}.bind(this),this.delayMs))}},{key:"fresh",value:function(){for(var e in this.freshNum=0,clearTimeout(this.tempT),this.tempT=null,this.styleList){var t=this.styleList[e].control,n=this.styleList[e].style,i=JSON.stringify(n);i=(i=(i=(i=i.replace(/\"/g,"")).replace(/\{/g,"")).replace(/\}/g,"")).replace(/\,/g,";"),t.dom.style=i}this.styleList=[]}}],[{key:"instance",get:function(){return this._instance||(this._instance=new base.DomCacheRefresh)}}]),e}(),base.DomCacheRefresh._instance=null,base.EventBase={CLICK:"click",DBLCLICK:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",DRAGBEGIN:"dragbegin",DRAGMOVE:"dragmove",DRAGEND:"dragend",FCOURS:"fcours",LOAD_BEFORE:"loadbefore",LOAD_COMPLETE:"loadcomplete",CREATE_BEFORE:"createbefore",CREATE_COMPLETE:"createcomplete",DESTORY_BEFORE:"destorybefore",DESTORY_COMPLETE:"destorycomplete",CHANGE:"change",CONTEXTMENU:"contextmenu"};var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}base.Handler=function(){function i(e,t,n){_classCallCheck(this,i),this._tmp_call=e,this._tmp_caller=t,this._tmp_args=n,this.runIndex=0,this.stopIndex=0,this.call=e?this.runMine.bind(this):null,this.caller=t,this.args=n,this.handlerList=[]}return _createClass(i,[{key:"runMine",value:function(){this._tmp_call&&this._tmp_call.call(this._tmp_caller,this._tmp_args),this.runIndex=0,this.stopIndex=0,this.runHandlerList()}},{key:"stop",value:function(){this.stopIndex=this.runIndex,this.runIndex=this.handlerList.length}},{key:"resume",value:function(){this.runIndex=this.stopIndex,this.runHandlerList(),this.stopIndex=0}},{key:"runHandlerList",value:function(){if(this.runIndex<this.handlerList.length){var e=this.handlerList[this.runIndex],t=e.call,n=e.caller,i=e.args;t.call(n,t,n,i),this.runIndex++,this.runHandlerList()}}},{key:"next",value:function(e){return this.handlerList.push(e),this}}],[{key:"create",value:function(e,t,n){return new base.Handler(e,t,n)}}]),i}(),base.EventCycle=function(){function r(e,t,n,i,s,o){_classCallCheck(this,r),this.debugger=!1,this.parent=null,this.createBefore=e,this.createComplete=t,this.loadedBefore=n,this.loadedComplete=i,this.destoryBefore=s,this.destroyComplete=o}return _createClass(r,[{key:"getEvent",value:function(e){var t=null;switch(e){case base.EventBase.CREATE_BEFORE:t=this.createBefore;break;case base.EventBase.CREATE_COMPLETE:t=this.createComplete;break;case base.EventBase.LOAD_BEFORE:t=this.loadedBefore;break;case base.EventBase.LOAD_COMPLETE:t=this.loadedComplete;break;case base.EventBase.DESTORY_BEFORE:t=this.destoryBefore;break;case base.EventBase.DESTORY_COMPLETE:t=this.destroyComplete}return t}},{key:"runEvent",value:function(e,t){var n=this.getEvent(e);n&&n.call.call(n.caller,n.args,t),this.debugger&&console.log(this.parent.author+" "+this.parent.name+" "+this.parent.guid+" run code "+e+" fun complete")}},{key:"setEvent",value:function(e,t){switch(e){case base.EventBase.CREATE_BEFORE:this.createBefore=t;break;case base.EventBase.CREATE_COMPLETE:this.createComplete=t;break;case base.EventBase.LOAD_BEFORE:this.loadedBefore=t;break;case base.EventBase.LOAD_COMPLETE:this.loadedComplete=t;break;case base.EventBase.DESTORY_BEFORE:this.destoryBefore=t;break;case base.EventBase.DESTORY_COMPLETE:this.destroyComplete=t}}}]),r}();var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}base.ControlDisplayBase=function(_base$EventPrope){function _class(e){_classCallCheck(this,_class);var t=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this));return t._eventCycle=e,t._childList=[],t._parent=null,t.type="",t._styleCache=base.DomCacheRefresh.instance,t.eventCycle.runEvent(base.EventBase.CREATE_BEFORE),t}return _inherits(_class,_base$EventPrope),_createClass(_class,[{key:"getChildAt",value:function(e){return this._childList[e]}},{key:"getChildById",value:function(e){for(var t in this.childList)if(this.childList[t].guid===e)return this.childList[t];return null}},{key:"reflexProp",value:function reflexProp(child,reflex){var guid=utils.Dom.getAttr(child,"guid"),text=utils.Dom.getAttr(child,"text"),config=utils.Dom.getAttr(child,"config");this.guid=guid||this.guid,text&&(this.text=text),config&&(this.config=eval(config)),this.reflexPropSelf(child,reflex)}},{key:"reflexPropSelf",value:function(e,t){}},{key:"reflexDom",value:function(e,t){this.reflexProp(e,t)}},{key:"addChild",value:function(e){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(e._parent=this)._childList.push(e),e.dom&&this.dom&&this.dom.appendChild(e.dom),e.setControllerItem(e.guid,e.guid),this.eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"removeAllChild",value:function(){for(var e in this._childList)this._childList[e].destory();this._childList=null}},{key:"removeSelfUI",value:function(){this.parent&&this.parent.dom.removeChild(this.dom)}},{key:"destoryDisplayBase",value:function(){this.eventCycle.runEvent(base.EventBase.DESTORY_BEFORE),this.removeAllChild(),this.removeSelfUI(),this._parent=null,this.eventCycle.runEvent(base.EventBase.DESTORY_COMPLETE),this._eventCycle=null}},{key:"destorySelfProp",value:function(){}},{key:"destorySelf",value:function(){this.destorySelfProp()}},{key:"destory",value:function(){this.destorySelf(),this.destoryDisplayBase()}},{key:"loadComplete",value:function(){this.eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"style",value:function(e,t){this._styleCache.addStyle(this,e,t)}},{key:"config",set:function(e){for(var t in e)void 0!==this[t]?this[t]=e[t]:this.debugger&&console.warn(this.type+" prop"+t+" is not defined")}},{key:"eventCycle",get:function(){return this._eventCycle||(this._eventCycle=new base.EventCycle),this._eventCycle.parent||(this._eventCycle.parent=this),this._eventCycle}},{key:"childList",get:function(){return this._childList}},{key:"dom",get:function(){return null}},{key:"parent",get:function(){return this._parent}},{key:"visibility",set:function(e){this.style("visibility",e),this._visibility=e},get:function(){return this._visibility}},{key:"zindex",set:function(e){this.style("zIndex",e),this._zindex=e},get:function(){return this._zindex}},{key:"width",set:function(e){this.style("width",e),this._width=e},get:function(){return this._width}}]),_class}(base.EventPrope);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}base.ControlEventBase=function(_base$ControlDisplayB){function _class(e){_classCallCheck(this,_class);var t=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,e));return t._eventList=[],t._event=[],t._stop=!1,t}return _inherits(_class,_base$ControlDisplayB),_createClass(_class,[{key:"getEvent",value:function(e,t){if(this._eventList[e])for(var n in this._eventList[e]){var i=this._eventList[e][n];if(i.call,i.caller,i.args,t.call==_call&&t.caller==_caller)return n}return-1}},{key:"onEvent",value:function(e,t){this._event[e]=t}},{key:"runEvent",value:function(e,t){if(this._event[e]){if(this._stop)return void(this._stop=!1);var n=this._event[e],i=n.call,s=n.caller,o=n.args;i&&i.call(s,t,o)}}},{key:"offEvent",value:function(e){delete this._event[e]}},{key:"on",value:function(e,t){-1==this.getEvent(e,t)&&(this._eventList[e]?this._eventList[e].push(t):this._eventList[e]=[t])}},{key:"off",value:function(e,t){var n=-1;if(this._eventList[e])for(var i in this._eventList[e])if(-1!=(n=this.getEvent(e,t)))break;0<=n&&delete this._eventList[e][n]}},{key:"once",value:function(e,t){this.on(e,function(){t.call&&t.call(t.caller,t.args),this.off(e,t)},this)}},{key:"dispatch",value:function(e,t,n){if(this._eventList[e]){if(this._stop)return void(this._stop=!1);for(var i in this._eventList[e]){var s=this._eventList[e][i],o=s.call,r=s.caller,l=s.args;n&&n!=r||o&&o.call(r,t,l)}}}},{key:"destorySelfEvent",value:function(){}},{key:"destorySelf",value:function(){this.destorySelfEvent(),this.destorySelfProp()}},{key:"destory",value:function(){this._event=null,this._eventList=null,this.destorySelf(),this.destoryDisplayBase()}},{key:"createReflexEvent",value:function createReflexEvent(str){return base.Handler.create(function(){eval(str)},this)}},{key:"reflexEvent",value:function(e,t){var n=utils.Dom.getEvt(e,"click"),i=utils.Dom.getEvt(e,"onload"),s=utils.Dom.getEvt(e,"change");n&&(this.click=this.createReflexEvent(n)),i&&t.ready(this.createReflexEvent(i)),s&&(this.change=this.createReflexEvent(s)),this.reflexEventDefault(e,t)}},{key:"reflexEventDefault",value:function(e,t){}},{key:"reflexDom",value:function(e,t){this.reflexProp(e,t),this.reflexEvent(e,t)}},{key:"stop",value:function(){this.parent&&this.parent instanceof base.ControlEventBase&&this.parent.pstop()}},{key:"pstop",value:function(){this._stop=!0,this.stop()}},{key:"click",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CLICK,e)},get:function(){return this._event[base.EventBase.CLICK]}},{key:"dblclick",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.DBLCLICK,e)}},{key:"change",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,e)}},{key:"contextmenu",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CONTEXTMENU,e)}},{key:"dragbegin",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.DRAGBEGIN,e)}},{key:"dragmove",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.DRAGMOVE,e)}},{key:"dragend",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.DRAGEND,e)}}]),_class}(base.ControlDisplayBase);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}base.ControlReflex=function(){function _class(){var t=this;_classCallCheck(this,_class),this.debugger=!1,this.call=null,this.caller=null,this.box=null,this._readyList=[],!window.attachEvent||window.opera?document.addEventListener("DOMContentLoaded",function(){t.init()},!1):document.onreadystatechange?document.onreadystatechange=function(e){"interactive"===document.readyState&&t.init()}:document.ready=function(){this.init()}.bind(this)}return _createClass(_class,[{key:"ready",value:function(e){this._readyList.push(e)}},{key:"init",value:function(){var e=new control.Box,t=document.body.cloneNode(!0);document.body.innerHTML="";for(var n=t.children,i=0;i<n.length;i++)this.build(n[i],e);this.box=e,document.body.appendChild(e.dom),this.runReadyList()}},{key:"runReadyList",value:function(){for(var e in this._readyList){var t=this._readyList[e],n=t.call,i=t.caller,s=t.args;n.call(i,this.box,s)}this._readyList=null}},{key:"startBuild",value:function(){}},{key:"build",value:function(e,t){if("SCRIPT"!==e.nodeName){var n=this.createControlAtt(e,t);this.buildChildren(e.children,n)}}},{key:"buildChildren",value:function(e,t){if(!(e.length<=0))for(var n=0;n<e.length;n++)this.build(e[n],t)}},{key:"checkReflex",value:function(e){return-1<e.indexOf("data-")||-1<e.indexOf("evt-")}},{key:"createControlAtt",value:function(e,t){for(var n=e.cloneNode(!1),i=this.makeControl(n),s=0;s<n.attributes.length;s++){var o=utils.Dom.getAttrNodeName(n.attributes[s]),r=utils.Dom.getAttrValue(n.attributes[s]);this.checkReflex(o)&&!this.debugger||i.dom.setAttribute(o,r)}return i.reflexDom(n,this),t.addChild(i),i}},{key:"makeControl",value:function makeControl(child){try{var type=utils.Dom.getAttr(child,"control-type");if(!type)return new control.Base(child);var a=eval("new "+type+"()");return a}catch(e){var error=new Error("reflex dom is Error："+utils.Dom.getOuterHtml(child));throw error.stack=e.stack,error}}}]),_class}(),base.reflex=new base.ControlReflex;var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}errlog.Error=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"throwError",value:function(e,t,n,i,s){var o,r=void 0,l=void 0,a=void 0;(r=$("<div></div>")).css({position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"black",opacity:.8,zIndex:999}),$("body").append(r),(l=$("<div></div>")).css({position:"absolute",width:"500px",height:"400px",top:"50%",left:"50%","border-radius":"30px",transform:"translate(-50%,-50%)",backgroundColor:"white",zIndex:999,overflow:"auto"}),(a=$("<div></div>")).text("错误提示⚠"),a.css({fontWeight:"bold",fontSize:"18px","text-align":"center",marginTop:"15px"}),l.append(a),o=$('<div style="font-size: 14px;padding:25px">\n                                <div>\n                                    <span>错误信息:</span>\n                                    <span style="color:red">'+e+'</span>\n                                </div>\n                                <div>\n                                    <span>错误堆栈:</span>\n                                    <span style="color:red">'+(s&&s.stack)+'</span>\n                                </div>\n                                <div>\n                                    <span>错误文件:</span>\n                                    <span style="color:red">'+t+'</span>\n                                </div>\n                                <div>\n                                    <span>错误行数:</span>\n                                    <span style="color:red">'+n+'</span>\n                                </div>\n                                <div>\n                                    <span>错误列数:</span>\n                                    <span style="color:red">'+i+"</span>\n                                </div>\n                            </div>"),l.append(o),$(function(){$("body").append(l),r.click(function(){r.remove(),l.remove()})})}}]),e}(),window.onerror=errlog.Error.throwError;var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}utils.Dom=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getOuterHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}},{key:"parseDom",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children}},{key:"getAttrValue",value:function(e){return e.value}},{key:"getAttrNodeName",value:function(e){return e.nodeName}},{key:"getBasic",value:function(e,t,n){return t.getAttribute(e+n)||""}},{key:"getAttr",value:function(e,t){return this.getBasic("data-",e,t)}},{key:"getEvt",value:function(e,t){return this.getBasic("evt-",e,t)}},{key:"getEvl",value:function(e,t){return this.getBasic("evl-",e,t)}},{key:"removeAttr",value:function(e,t,n){e.removeAttribute(t+n)}}]),e}(),utils.Href=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getQureryString",value:function(e,t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=(t=t?"?"+t.split("?")[1]:window.location.search).substr(1).match(n);return null!=i?i[2]:null}}]),e}(),utils.Ajax=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"post",value:function(e,t,n,i){$.ajax({url:e,type:"post",data:t,dataType:"json",success:n,error:i})}},{key:"postFormData",value:function(e,t,n,i){$.ajax({url:e,type:"POST",data:t,processData:!1,contentType:!1,success:n,error:i})}},{key:"get",value:function(e,t,n,i){$.ajax({url:e,type:"get",data:t,dataType:"json",success:n,error:i})}}]),e}();var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Base=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.name="Base",n.version="1.0.0",n.author="heshang",n._value=null,e?(n._html=$(e.cloneNode(!0)),n.dom.setAttribute("data-guid",n.guid)):n._html="",n}return _inherits(i,e),_createClass(i,[{key:"dom",get:function(){return this.html?this.html[0]:""}},{key:"value",get:function(){return this._value},set:function(e){this._value=e}}]),i}(base.ControlEventBase);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Box=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.name="Box",t.version="1.0.0",t.author="heshang",t._html=$('<div data-guid="'+t.guid+'"></div>'),t}return _inherits(n,e),_createClass(n,[{key:"dom",get:function(){return this.html[0]}},{key:"text",set:function(e){this._text=e,this.html.text(e)}}]),n}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Button=function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.name="Button",n.version="1.0.0",n.author="heshang",n._text=e,n._html=$('<button class="button" data-guid="'+n.guid+'">'+n.text+"</button>"),n._bindClick(),n}return _inherits(i,e),_createClass(i,[{key:"offClick",value:function(){}},{key:"_bindClick",value:function(){this._html.on("click",function(){this.runEvent(base.EventBase.CLICK,this)}.bind(this))}},{key:"destorySelfProp",value:function(){this._text=null}},{key:"destorySelfEvent",value:function(){this._html.off("click")}},{key:"dom",get:function(){return this._html[0]}},{key:"text",set:function(e){this._text=e,this.html.text(this.text)},get:function(){return this._text}}]),i}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.CheckBox=function(e){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return i._html=$("<span></span>"),i.inputDom=$("<input type='checkbox' value=\""+t+'"/>'),i.textDom=$("<span>"+e+"</span>"),i._html.append(i.inputDom),i._html.append(i.textDom),i.value=t,i.controlName=e,i._checked=!1,i._groupName="",i._showType="",i._text=e,i.bindEvent(),i}return _inherits(s,e),_createClass(s,[{key:"bindEvent",value:function(){var e=this;this._html.on("click",function(){e.runEvent(base.EventBase.CLICK),e.checked=!e.checked})}},{key:"destorySelfEvent",value:function(){this._html.off("click")}},{key:"destorySelfProp",value:function(){}},{key:"text",set:function(e){this._text=e,this.textDom.text(e)},get:function(){return this._text}},{key:"groupName",set:function(e){this._groupName=e,this.inputDom.attr("name",e)}},{key:"change",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,e)}},{key:"click",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CLICK,e)}},{key:"showType",set:function(e){this.inputDom.addClass(e),this._showType=e}},{key:"checked",get:function(){return this._checked},set:function(e){this.inputDom.prop("checked",e),this._checked=e,this._parent&&this._parent.changeSelectedIndex(this),this.runEvent(base.EventBase.CHANGE)}},{key:"dom",get:function(){return this._html[0]}}]),s}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.CheckGroup=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._selectIndex=[],n._selectItem=[],n._groupName=e,n._html=$("<span></span>"),n}return _inherits(i,e),_createClass(i,[{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"groupName");t.ready(base.Handler.create(function(){this.groupName=n},this))}},{key:"changeSelectedIndex",value:function(e){var t=e.checked,n=this.childList.indexOf(e),i=this._selectIndex.indexOf(n);i<0&&t?this._selectIndex.push(n):!t&&0<=i&&this._selectIndex.splice(i,1),this.selectIndex.sort(),this.runEvent(base.EventBase.CHANGE)}},{key:"addChildOther",value:function(e){e.groupName=this.groupName}},{key:"selectedBool",value:function(e){for(var t=0;t<this.childList.length;t++)this.childList[t].checked=e}},{key:"selectRevert",value:function(){for(var e=0;e<this.childList.length;e++)this.childList[e].checked=!this.childList[e].checked}},{key:"dom",get:function(){return this._html[0]}},{key:"change",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,e)}},{key:"groupName",set:function(e){for(var t=0;t<this.childList.length;t++)this.childList[t].groupName=e},get:function(){return this._groupName}},{key:"selectIndex",get:function(){return this._selectIndex},set:function(e){if(!this.debugger||e instanceof Array){this._selectIndex=e;for(var t=0;t<e.length;t++)this.childList[t]&&(this.childList[t].checked=!1),this.childList[e[t]]&&this.childList[e[t]]&&(this.childList[e[t]].checked=!0)}else console.warn(e+"< is not array")}}]),i}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.ComboBox=function(_control$Base){function _class(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];_classCallCheck(this,_class);var n=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,t));return n.name="ComboBox",n.version="1.0.0",n.author="hehe;",n._html=$('<div class="comboBox"></div>'),n.selectionDom=$('<div class="comboBox-selection"></div>'),n.selectionPlaceholderDom=$('<span class="comboBox-selection-placeholder">请选择</span> '),n.selectionArrowDom=$('<div><i class="comboBox-selection-arrow"></i></div>'),n.selectionDom.append(n.selectionPlaceholderDom),n.selectionDom.append(n.selectionArrowDom),n.selectDropDownDom=$('<div class="comboBox-dropdown"></div>'),n.selectDropDownNotFoundDom=$('<div class="comboBox-dropdown-notfound">无匹配数据</div> '),n.selectOptionDom=$('<ul class="comboBox-dropdown-list"></ul>'),n.selectDropDownLoadDom=$('<div class="comboBox-dropdown-loading">加载中...</div>'),n.selectDropDownDom.append(n.selectDropDownNotFoundDom),n.selectDropDownDom.append(n.selectOptionDom),n.selectDropDownDom.append(n.selectDropDownLoadDom),n._html.append(n.selectionDom),n._html.append(n.selectDropDownDom),n._selectList=e.selectList||[],n._selectNotFoundText=e.selectNotFoundText||"无匹配数据",n._defaultIndex=e.defaultIndex||"",n._comboBoxStyle=e.comboBoxStyle||"",n._curSelectObj={},n._curSelectChildArr=[],n._disUsed=e.disUsed||!1,n._disScroll=e.disScroll||!1,n._renderSelectList(),n._init(),n}return _inherits(_class,_control$Base),_createClass(_class,[{key:"_init",value:function(){this.disUsed=this._disUsed,this.disScroll=this._disScroll,this.comboBoxStyle=this._comboBoxStyle}},{key:"_bindEvent",value:function(){var t=this;this._html.on("click",function(e){e.stopPropagation(),t.runEvent(base.EventBase.CLICK),$(t.selectionDom[0].children[1]).toggleClass("comboBox-transform"),t.selectDropDownDom.slideToggle()}),$(document).on("click",function(){t.selectDropDownDom.slideUp()})}},{key:"_renderSelectList",value:function(){var l=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._selectList;if(this.selectOptionDom.empty(),this.selectDropDownNotFoundDom.text(this._selectNotFoundText),this.selectDropDownLoadDom.css("display","block"),0==a.length)return this.selectDropDownNotFoundDom.css("display","block"),this.selectDropDownLoadDom.css("display","none"),this.selectOptionDom.empty(),this.curSelectObj={name:"",value:""},void this.selectionPlaceholderDom.text("-");this.selectDropDownNotFoundDom.css("display","none");for(var c=!0,e=function(e){var t=a[e],n=t.name,i=t.value,s=t.index,o=t.child,r=$('<li class="comboBox-dropdown-item" data-val="'+i+'">'+n+"</li>");$('<span class="comboBox-arrow">></span>'),l._defaultIndex?l._defaultIndex===s&&c&&(l.curSelectObj={name:n,value:i},l.curSelectChildArr=o,r.addClass("comboBox-selectStyle").siblings().removeClass("comboBox-selectStyle"),l.selectionPlaceholderDom.text(n),c=!1):0==e&&(r.addClass("comboBox-selectStyle").siblings().removeClass("comboBox-selectStyle"),l.selectionPlaceholderDom.text(n),l.curSelectObj={name:n,value:i}),l.selectOptionDom.append(r),r.on("click",function(){var e={name:n,val:i};l.curSelectChildArr=o,l.curSelectObj=e,l.selectionPlaceholderDom.text(n),l.runEvent(base.EventBase.CHANGE),n===l.curSelectObj.name&&r.addClass("comboBox-selectStyle").siblings().removeClass("comboBox-selectStyle")}),e==a.length-1&&l.selectDropDownLoadDom.css("display","none")},t=0;t<a.length;t++)e(t)}},{key:"reflexPropSelf",value:function reflexPropSelf(child,reflex){var ListVal=utils.Dom.getAttr(child,"selectList"),NotFoundTextVal=utils.Dom.getAttr(child,"selectNotFoundText"),IndexVal=utils.Dom.getAttr(child,"defaultIndex"),StyleVal=utils.Dom.getAttr(child,"defaultStyle"),disUsedVal=utils.Dom.getAttr(child,"disUsed"),disScrollVal=utils.Dom.getAttr(child,"disScroll");this.selectList=eval(ListVal),this.selectNotFoundText=eval(NotFoundTextVal),this.defaultIndex=eval(IndexVal),this.comboBoxStyle=eval(StyleVal),this.disUsed=eval(disUsedVal),this.disScroll=eval(disScrollVal)}},{key:"destroySelfEvent",value:function(){this._html.off("click"),this._html.off("change")}},{key:"destroySelfProp",value:function(){this._selectList=null,this._selectNotFoundText=null,this._defaultIndex=null,this._comboBoxStyle=null,this._curSelectObj=null,this._curSelectChildArr=null,this._disUsed=null,this._disScroll=null,this._html=null}},{key:"disUsed",get:function(){return this._disUsed},set:function(e){e?(this.selectionDom.addClass("comboBox-disable"),this.selectionArrowDom.css("display","none"),this.selectOptionDom.css("display","none"),this._html.unbind("click")):(this.selectionDom.removeClass("comboBox-disable"),this.selectionArrowDom.css("display","block"),this.selectOptionDom.css("display","block"),this._html.unbind("click"),this._bindEvent())}},{key:"disScroll",get:function(){return this._disScroll},set:function(e){e?(this.selectDropDownDom.css("overflow","hidden"),this.selectOptionDom.css({"overflow-y":"scroll",width:"1000px",height:"150px"})):(this.selectDropDownDom.css("overflow-y","auto"),this.selectOptionDom.css({"overflow-y":"initial"}))}},{key:"comboBoxStyle",set:function(e){switch(e){case control.ComboBox.DEFAULT_STYLE:this.html.addClass("comboBox-defaultStyle");break;default:e?(this.html.removeClass("comboBox-defaultStyle"),this.html.addClass(e)):this.html.addClass("comboBox-defaultStyle")}},get:function(){return this._comboBoxStyle}},{key:"curSelectObj",set:function(e){this._curSelectObj=e,this.selectionPlaceholderDom.text(e.name)},get:function(){return this._curSelectObj}},{key:"curSelectChildArr",get:function(){return this._curSelectChildArr},set:function(e){this._curSelectChildArr=e}},{key:"selectList",get:function(){return this._selectList},set:function(e){this._selectList=[],this.selectOptionDom.empty(),this._selectList=e,this._renderSelectList()}},{key:"selectNotFoundText",set:function(e){this._selectNotFoundText=e,this.selectDropDownNotFoundDom.text(e)},get:function(){return this._selectNotFoundText}},{key:"defaultIndex",set:function(e){this._defaultIndex=e,this._renderSelectList()},get:function(){return this._defaultIndex}},{key:"dom",get:function(){return this._html[0]}}]),_class}(control.Base),control.ComboBox.DEFAULT_STYLE=0;var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Image=function(e){function s(e,t,n){_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return i._imgDom=$("<img>"),i._width=e||"0px",i._height=t||"0px",i._imgDom.attr("width",(e||0)+"px"),i._imgDom.attr("height",(t||0)+"px"),i._src="",i._html=$("<span></span>"),e||(i._widthSetted=!1),t||(i._heightSetted=!1),i._html.append(i._imgDom),i._bindEvent(),i}return _inherits(s,e),_createClass(s,[{key:"_bindEvent",value:function(){var t=this;this._imgDom.on("click",function(e){console.log(this),console.log(t)})}},{key:"getPixelData",value:function(e,t){if(!this._src||""===this._src)return null;var n=new Image,i=document.createElement("canvas");n.onload=function(){return this._widthSetted||i.attr("width",this._width+"px"),_this._heightSetted||i.attr("height",this._height+"px"),console.log("width is:",this._width," height is:",this._height),i[0].getContext("2d").getImageDate(e,t,1,1)}}},{key:"reflexPropSelf",value:function(e,t){console.log("child is:::",e);var n=utils.Dom.getAttr(e,"showWidth");n&&""!==n&&(this._widthSetted=!0,this._imgDom.attr("width",n));var i=utils.Dom.getAttr(e,"showHeight");i&&""!==i&&(this._heightSetted=!0,this._imgDom.attr("height",i));var s=utils.Dom.getAttr(e,"showSrc");this._imgDom.attr("src",s)}},{key:"showSrc",get:function(){return this._src},set:function(e){this._src=e,this._imgDom.attr("src",e)}},{key:"showWidth",get:function(){return this._width},set:function(e){this._width=e,this._widthSetted=!0,this._imgDom.attr("width",e)}},{key:"showHeight",get:function(){return this._height},set:function(e){this._height=e,this._heightSetted=!0,this._imgDom.attr("height",e)}}]),s}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.ImgButton=function(e){function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",s=arguments[4];_classCallCheck(this,l);var o=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,s));o.name="ImgButton",o.version="1.0.0",o.author="fengche",o._text=i,o._normorl=e,o._over=t,o._down=n,o._bgSrc=e,o._align="left",o._vertical="top",o._divDom=$('<div style="position:absolute">'+o._text+"</div>");var r=$('<button class="button" data-guid="'+o.guid+'" style="position: relative; border: null; padding:0; margin: 0;"></button>');return r.append(o._divDom),o._html=r,o._bindEvent(),o}return _inherits(l,e),_createClass(l,[{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"normorl"),i=utils.Dom.getAttr(e,"over"),s=utils.Dom.getAttr(e,"down"),o=utils.Dom.getAttr(e,"width"),r=utils.Dom.getAttr(e,"height"),l=utils.Dom.getAttr(e,"align"),a=utils.Dom.getAttr(e,"vertical");this.normorl=n,this.over=i,this.down=s,this.width=o,this.height=r,this.align=l,this._bgSrc=n,this.vertical=a}},{key:"offClick",value:function(){}},{key:"_bindEvent",value:function(){this._html.on("click",function(){this.runEvent(base.EventBase.CLICK,this)}.bind(this)),this._html.on("mouseover",function(){this._bgSrc=this._over,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_OVER,this)}.bind(this)),this._html.on("mouseout",function(){this._bgSrc=this._normorl,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_OUT,this)}.bind(this)),this._html.on("mousedown",function(){this._bgSrc=this._down,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_DOWN,this)}.bind(this)),this._html.on("mouseup",function(){this._bgSrc=this._over,this._html.css({background:"url("+this._bgSrc+") no-repeat","background-size":"100% 100%"}),this.runEvent(base.EventBase.MOUSE_UP,this)}.bind(this))}},{key:"destorySelfProp",value:function(){this._normorl=null,this._over=null,this._down=null,this._width=null,this._height=null,this._align=null,this._bgSrc=null,this._vertical=null,this._divDom=null,this._html=null}},{key:"destorySelfEvent",value:function(){this._html.off("mouseup").off("mouseout").off("mousedown").off("mouseover").off("click")}},{key:"normorl",set:function(e){this._normorl=e,this._bgSrc=e,this._html.css("background","url("+this._bgSrc+") no-repeat"),this._html.css("background-size","100% 100%")}},{key:"over",set:function(e){this._over=e}},{key:"down",set:function(e){this._down=e}},{key:"width",set:function(e){this._width=e,this._html.css("width",e),this._divDom.css("width",e)},get:function(){return this._width}},{key:"height",set:function(e){this._height=e,this._html.css("height",e)},get:function(){return this._height}},{key:"vertical",set:function(e){if("top"==(this._vertical=e))this._divDom.css("top",0),this._divDom.css("transform","translateY(0)");else if("middle"==e)this._divDom.css("top","50%"),this._divDom.css("transform","translateY(-50%)");else{if("bottom"!=e)return void console.warn("您输入的值有误， 请重新输入");this._divDom.css("top","100%"),this._divDom.css("transform","translateY(-100%)")}},get:function(){return this._vertical}},{key:"align",set:function(e){"left"===e||"center"===e||"right"===e?(this._align=e,this._divDom.css("text-align",e)):console.warn("您输入的值有误， 请重新输入")},get:function(){return this._align}},{key:"mouseout",set:function(e){this._event[base.EventBase.MOUSE_OUT]=e}},{key:"mouseover",set:function(e){this._event[base.EventBase.MOUSE_OVER]=e}},{key:"mousedown",set:function(e){this._event[base.EventBase.MOUSE_DOWN]=e}},{key:"mouseup",set:function(e){this._event[base.EventBase.MOUSE_UP]=e}},{key:"dom",get:function(){return this._html[0]}},{key:"text",set:function(e){this._text=e,this._divDom.text(e)},get:function(){return this._text}}]),l}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Input=function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.name="Input",t.version="1.0.0",t.author="heshang";var n='<span data-guid="'+t.guid+'">\n                        <input type="text"/>\n                    </span>';return t._html=$(n),t}return _inherits(i,e),_createClass(i,[{key:"text",set:function(e){this.html.find("input").val(e)},get:function(){return this.html.find("input").val()}},{key:"dom",get:function(){return this.html[0]}}]),i}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Label=function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.name="Label",n.version="1.0.0",n.author="heshang",n.vuebox=$('<div id="box_'+n.guid+'"></div>'),n.data={msg:e},n._html='<span data-guid="'+n.guid+'" ref="myBox" @click="click">{{msg}}</span>',n}return _inherits(i,e),_createClass(i,[{key:"checkVue",value:function(){if(!this.vue){var e=this;this.parent?this.parent.dom.appendChild(this.vuebox[0]):document.body.appendChild(this.vuebox[0]),this.vue=new Vue({el:"#box_"+this.guid,template:this.html,data:function(){return e.data},methods:{click:function(){e.runEvent(base.EventBase.CLICK,e)}}})}}},{key:"dom",get:function(){return this.checkVue(),this.vue.$refs.myBox}},{key:"text",set:function(e){this.data.msg=e},get:function(){return this.data.msg}}]),i}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,n);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in s)return s.value;var r=s.get;return void 0!==r?r.call(i):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Menu=function(e){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Array,t=arguments[1],n=arguments[2];_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return i.name="Menu",i.version="1.0.0",i.author="lingyan",i._childList=e||[],i._menuType=t||control.Menu.MenuType.APP_MENU,i._acceleratorKeyDic=new Array,i}return _inherits(s,e),_createClass(s,[{key:"_getHtml",value:function(){switch(this._menuType){case control.Menu.MenuType.APP_MENU:this._subDom=$('<ul class="lingyan-appMenu"></ul>');break;case control.Menu.MenuType.RIGHT_MENU:this._subDom=$('<ul class="lingyan-rightMenu"></ul>')}this._html=this._subDom,this._bindEvent()}},{key:"_bindEvent",value:function(){var o=this;window.onkeydown=function(e){if(o._acceleratorKeyDic){var t="";e.altKey&&(t+="alt+"),e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),t+=e.key.toLowerCase(),o._acceleratorKeyDic[t]&&o._acceleratorKeyDic[t].clickFunc();var n=e.key.toLowerCase();for(var i in o._acceleratorKeyDic)i.toLowerCase().includes(n)&&o._acceleratorKeyDic[i]._parent.showItem&&o._acceleratorKeyDic[i].clickFunc()}},this._html.on("blur",function(){if(o._childList){var e=!0,t=!1,n=void 0;try{for(var i,s=o._childList[Symbol.iterator]();!(e=(i=s.next()).done);e=!0)i.value.showItem=!1}catch(e){t=!0,n=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw n}}}})}},{key:"_getAllKeys",value:function(e){if(e){var t=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;r&&r.accelerator&&(this._acceleratorKeyDic[r.accelerator.toLowerCase()]=r),r&&r.childList&&this._getAllKeys(r.childList)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"addChild",value:function(e){_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"addChild",this).call(this,e),this._getAllKeys([e])}},{key:"destorySelfProp",value:function(){this._accelerator=null,this._subItems=null,this._acceleratorKeyDic=null,this._menuType=null,this._html=null,this._childList=null,this._subDom=null}},{key:"destorySelfEvent",value:function(){this._html.off("blur")}},{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"menuType");n&&(this._menuType=n),this._getHtml()}},{key:"childList",set:function(e){if(this._childList=e){var t=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)s.value._parent=this}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"accelerator",get:function(){return this._accelerator},set:function(e){this._accelerator=e}},{key:"dom",get:function(){return this._html||this._getHtml(),this._html[0]}}]),s}(control.Base),control.Menu.MeunItemType={NORMAL:"normal",SEPARATOR:"separator",SUBMENU:"submenu"},control.Menu.MenuType={APP_MENU:"appMenu",RIGHT_MENU:"rightMenu"},control.Menu.MeunAccelerator={Command:"Cmd",Control:"Ctrl",CommandOrControl:"CmdOrCtrl",Alt:"Alt",Option:"Option",AltGr:"AltGr",Shift:"Shift",Super:"Super"};var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.MenuItem=function(e){function u(e,t,n,i,s,o,r){var l=!(7<arguments.length&&void 0!==arguments[7])||arguments[7],a=arguments[8];_classCallCheck(this,u);var c=_possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,a));return c.name="MenuItem",c.version="1.0.0",c.author="lingyan",c._label=e,c._index=t||1,c._childList=n||[],c._accelerator=o,c._icon=r,c._enable=l||!1,c._type=s||control.Menu.MeunItemType.NORMAL,c._showItem=!1,c._getFocused=!1,c._clickFunc=i,c._getHtml(),c}return _inherits(u,e),_createClass(u,[{key:"_getHtml",value:function(){var e=this;switch(this._type){case control.Menu.MeunItemType.SEPARATOR:this._currentDom=$('<li class="lingyan-separator-menuItem"></li>');break;case control.Menu.MeunItemType.NORMAL:0==this._index?(this._currentDom=$('<li class="lingyan-normal-menuItem-first"><span>'+this.label+"</span></li>"),this._subDom=$('<ul class="lingyan-normal-menu-first"></ul>')):(this._currentDom=$('<li class="lingyan-normal-menuItem"></li>'),this._initStyle(3),this._subDom=$('<ul class="lingyan-normal-menu"></ul>'))}this._subDom&&(this._subDom.hide(),this._currentDom.append(this._subDom)),this._html=this._currentDom,this._bindEvent(),this.clickFunc=function(){0==e.index&&(e._getFocused=!e._getFocused),e._clickFunc&&e._clickFunc,e.showItem=!e._showItem},this._currentDom.on("click",function(){e.clickFunc()})}},{key:"_initStyle",value:function(e){switch(e){case 3:if(this.icon){var t=$('<img src="'+this.icon+'"/>');this._currentDom.append(t)}if(this._currentDom.append($('<span class="lingyan-normal-menuItem-label" style="left: '+(this.icon?40:"10px")+'">'+this.label+"</span>")),this._accelerator&&(this._acceleratorDom=$('<span class="lingyan-normal-menuItem-accelerator">'+this._accelerator+"</span>"),this._currentDom.append(this._acceleratorDom)),this._childList&&0<this._childList.length){var n=$('<span class="lingyan-normal-menuItem-right" style="vertical-align: middle;"></span>');this._currentDom.append(n)}}}},{key:"_bindEvent",value:function(){var e=this;this._currentDom.on("mouseenter",function(){(0==e.index&&e.getFocused||0<e.index)&&(e.showItem=!0)}),this._currentDom.on("mouseleave",function(){e.showItem=!1})}},{key:"addChild",value:function(e){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(e._parent=this)._childList.push(e),e.dom&&this._subDom&&this.type!=control.Menu.MeunItemType.SEPARATOR&&(this._subDom.append(e.dom),this._subDom.css("width",this.maxWidth+"px")),e.setControllerItem(e.guid,e.guid),this.eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"destorySelfProp",value:function(){this._text=null,this._width=null,this._enable=null,this._icon=null,this._accelerator=null,this._type=null,this._clickFunc=null,this._childList=null,this._label=null,this._showItem=null}},{key:"destorySelfEvent",value:function(){this._currentDom.off("click"),this._currentDom.off("mouseenter"),this._currentDom.off("mouseleave")}},{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"label"),i=utils.Dom.getAttr(e,"index"),s=utils.Dom.getAttr(e,"accelerator"),o=utils.Dom.getAttr(e,"icon"),r=utils.Dom.getAttr(e,"enable"),l=utils.Dom.getAttr(e,"type");n&&(this.label=n),i&&(this.index=i),s&&(this.accelerator=s),o&&(this.icon=o),r&&(this.enable=r),l&&(this.type=l),this._getHtml()}},{key:"reflexEventDefault",value:function(e,t){var n=this;utils.Dom.getEvt(e,"click")&&(this.clickFunc=function(){0==n.index&&(n._getFocused=!n._getFocused),n.runEvent(base.EventBase.CLICK),n.showItem=!n._showItem},this._currentDom.on("click",function(){n.clickFunc()}))}},{key:"getFocused",get:function(){return this._getFocused},set:function(e){this._getFocused=e}},{key:"showItem",get:function(){return this._showItem},set:function(e){if(e&&0===this._index){var t=!0,n=!1,i=void 0;try{for(var s,o=this._parent.childList[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)s.value.showItem=!1}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}this._showItem=e,this._subDom&&(this._showItem?this._subDom.show():this._subDom.hide())}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}},{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"childList",set:function(e){if((this._childList=e)&&!(e.length<=0)){var t=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)s.value._parent=this}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"clickFunc",get:function(){return this._clickFunc},set:function(e){this._clickFunc=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"accelerator",get:function(){return this._accelerator},set:function(e){this._accelerator=e}},{key:"icon",get:function(){return this._icon},set:function(e){this._icon=e}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable=e}},{key:"maxWidth",get:function(){if(!this._childList||this._childList.length<=0)return 0;for(var e=0,t=0;t<this._childList.length;t++){var n=(this._childList[t].label?15*this._childList[t].label.length:0)+(this._childList[t].icon?30:0)+(this._childList[t].accelerator?10*this._childList[t].accelerator.length:0)+50;e<n&&(e=n)}for(var i=0;i<this._childList.length;i++)this._childList[i].width=e;return e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,0!=this._index&&this._subDom&&this._subDom.css("left",this.width-40+"px"),0!=this._index&&this._accelerator&&this._acceleratorDom.css("left",this.width-10*this._accelerator.length-15+"px")}},{key:"dom",get:function(){return this._html[0]}}]),u}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.ProgressBar=function(_control$Base){function _class(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];_classCallCheck(this,_class);var n=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this,t));return n.name="ProgressBar",n.version="1.0.0",n.author="hehe;",n._html=$('<div class="progressBar"></div>'),n.progressBgDom=$('<div class="progressBar-bg"></div>'),n.barDom=$('<div class="progressBar-progress"></div>'),n.progressValDom=$('<span class="progressBar-val"></span>'),n.progressBgDom.append(n.barDom),n._html.append(n.progressBgDom),n._html.append(n.progressValDom),n._progressBarStyle=e.progressBarStyle||control.ProgressBar.SINGLECOLOR_STYLE,n._progressValStyle=e.progressValStyle||control.ProgressBar.PERCENTER_STYLE,n._progressVal=e.progressVal||0,n._isShowProgressVal=e.isShowProgressVal||!1,n._progressTime=e.progressTime||1e3,n._progresFlag=0,n._progressDesc=e.progressDesc||"",n.init(),n}return _inherits(_class,_control$Base),_createClass(_class,[{key:"init",value:function(){this.progressBarStyle=this._progressBarStyle,this.progressValStyle=this._progressValStyle,this.progressVal=this._progressVal,this.isShowProgressVal=this._isShowProgressVal}},{key:"reflexPropSelf",value:function reflexPropSelf(child,reflex){var progressVal=utils.Dom.getAttr(child,"progressVal"),isShowProgressVal=utils.Dom.getAttr(child,"isShowProgressVal"),progressTimeVal=utils.Dom.getAttr(child,"progressTime"),progressBarStyleVal=utils.Dom.getAttr(child,"progressBarStyle"),progressValStyleVal=utils.Dom.getAttr(child,"progressValStyle"),progressDescVal=utils.Dom.getAttr(child,"progressDesc");this.progressVal=eval(progressVal),this.isShowProgressVal=eval(isShowProgressVal),this.progressTime=eval(progressTimeVal),this.progressBarStyle=eval(progressBarStyleVal),this.progressValStyle=eval(progressValStyleVal),this.progressDesc=eval(progressDescVal)}},{key:"destroySelfEvent",value:function(){this._html.off("change")}},{key:"destroySelfProp",value:function(){this._progressBarStyle=null,this._progressValStyle=null,this._progressVal=null,this._isShowProgressVal=null,this._progressTime=null,this._progresFlag=null,this._progressDesc=null,this._html=null}},{key:"progresFlag",get:function(){return this._progresFlag}},{key:"progressDesc",get:function(){return this._progressDesc||""},set:function(e){this._progressDesc=e,this.progressValDom.text(e+this._progresFlag+"%")}},{key:"isShowProgressVal",get:function(){return this._isShowProgressVal},set:function(e){var t=(this._isShowProgressVal=e)?"none":"block";this.progressValDom.css("display",t)}},{key:"progressVal",get:function(){return this._progressVal},set:function(e){var t,n=this,i=this._progressVal;this._progressVal=100<e?100:e,t=i!=this.progressVal?Math.abs(this.progressVal-i):this.progressVal;var s=parseInt(this._progressTime/t)||500,o=setInterval(function(){n._progresFlag!=n._progressVal?(n._progresFlag>n._progressVal?--n._progresFlag:n._progresFlag<n._progressVal&&++n._progresFlag,n.runEvent(base.EventBase.CHANGE),n.progressValDom.text(n.progressDesc+n._progresFlag+"%"),n.barDom.stop(),n.progressValDom.stop()):clearInterval(o)},s);setTimeout(function(){n.barDom.css({width:n.html.width()*(n._progressVal/100),"transition-duration":n._progressTime/1e3+"s"}),n._progressValStyle==control.ProgressBar.PERCENTER_STYLE&&n.progressValDom.css({left:n.html.width()*(n._progressVal/100)-20,"transition-duration":n._progressTime/1e3+"s"})},0)}},{key:"progressBarStyle",set:function(e){switch(e-0){case control.ProgressBar.SINGLECOLOR_STYLE:this.html.removeClass("progressBar-barStyle-Gradual"),this.html.addClass("progressBar-barStyle-singleColor");break;case control.ProgressBar.GRADUAL_STYLE:this.html.removeClass("progressBar-barStyle-singleColor"),this.html.addClass("progressBar-barStyle-Gradual");break;default:this.html.addClass("progressBar-barStyle-singleColor")}}},{key:"progressValStyle",set:function(e){switch(e){case control.ProgressBar.PERTOP_STYLE:this.progressValDom.removeClass("progressBar-percentStyle-center progressBar-percentStyle-right"),this.progressValDom.addClass("progressBar-percentStyle-top");break;case control.ProgressBar.PERCENTER_STYLE:this.progressValDom.removeClass("progressBar-percentStyle-top progressBar-percentStyle-right"),this.progressValDom.addClass("progressBar-percentStyle-center");break;case control.ProgressBar.PERRIGHT_STYLE:this.progressValDom.removeClass("progressBar-percentStyle-top progressBar-percentStyle-center"),this.progressValDom.addClass("progressBar-percentStyle-right");break;default:e?(console.log(e),this.progressValDom.removeClass("progressBar-percentStyle-top progressBar-percentStyle-center progressBar-percentStyle-right"),this.progressValDom.addClass(e)):(console.log(e),this.progressValDom.addClass("progressBar-percentStyle-top"))}}},{key:"change",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,e)}},{key:"dom",get:function(){return this._html[0]}}]),_class}(control.Base),control.ProgressBar.SINGLECOLOR_STYLE=1,control.ProgressBar.GRADUAL_STYLE=2,control.ProgressBar.PERTOP_STYLE=1,control.ProgressBar.PERCENTER_STYLE=2,control.ProgressBar.PERRIGHT_STYLE=3;var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Radio=function(e){function o(e,t,n){_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,n));i.name="Radio",i.version="1.0.0",i.author="heshang",i._selected=!1,i._groupName="",i.textDom=$("<span>"+i.text+"</span>"),i.inputDom=$('<input type="radio" value="'+i._value+'"/>');var s=$("<span></span>");return s.append(i.inputDom),s.append(i.textDom),i._html=s,i.value=t,i.text=e,i._bindEvent(),i}return _inherits(o,e),_createClass(o,[{key:"_bindEvent",value:function(){var e=this;this.inputDom.on("change",function(){e.changeParentPro()})}},{key:"changeParentPro",value:function(){this.parent instanceof control.RadioGroup&&(this.parent.selectIndex=this.parent.childList.indexOf(this),(this.parent.selectItem=this).parent.disChange())}},{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"value");this.value=n}},{key:"selected",set:function(e){e?this.inputDom.attr("checked","checked"):this.inputDom.removeAttr("checked"),this._selected=e},get:function(){return this._selected}},{key:"value",get:function(){return this._value},set:function(e){this.inputDom.val(e),this._value=e}},{key:"groupName",set:function(e){this.inputDom.attr("name",e),this._groupName=e}},{key:"dom",get:function(){return this._html[0]}},{key:"text",get:function(){return this._text},set:function(e){this.textDom.text(e),this._text=e}}]),o}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.RadioGroup=function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.name="Radio",t.version="1.0.0",t.author="heshang",t._selectIndex=-1,t._selectItem=null;var n=$("<span></span>");return t._html=n,t._groupName="",t}return _inherits(i,e),_createClass(i,[{key:"disChange",value:function(){this.runEvent(base.EventBase.CHANGE)}},{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"name"),i=utils.Dom.getAttr(e,"selectIndex");t.ready(base.Handler.create(function(){this.groupName=n,i&&(this.selectIndex=i)},this,"加载完成"))}},{key:"selectIndex",set:function(e){e<this.childList.length?(this._selectIndex=e,this._selectItem=this.childList[e],this.selectItem.selected=!0):this.debugger&&console.warn("radioGroup guid:"+this.guid+" childList length:"+this.childList.length+",set index:"+e)},get:function(){return this._selectIndex}},{key:"selectItem",set:function(e){var t=this.childList.indexOf(e);0<=t&&(this.selectIndex=t)},get:function(){return this._selectItem}},{key:"groupName",set:function(e){for(var t=0;t<this.childList.length;t++)this.childList[t]instanceof control.Radio&&(this.childList[t].groupName=e);this._groupName=e}},{key:"dom",get:function(){return this._html[0]}},{key:"text",get:function(){return this._text},set:function(e){this._text=e}}]),i}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Slider=function(e){function a(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{width:394,height:24},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{width:400,height:30},s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{width:40,height:40},o=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],r=arguments[6];_classCallCheck(this,a);var l=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,r));return l.name="Slider",l.version="1.0.0",l.author="liaohen",l._direction=e,l._value=t,l._innerSize=n,l._outerSize=i,l._sliderSize=s,l._heartShow=o,l._outerDom=$("<div></div>"),l._innerDom=$("<div></div>"),l._heartDom=$("<div></div>"),l._sliderDom=$("<div></div>"),l._heartDom.append(l._sliderDom),l._innerDom.append(l._heartDom),l._outerDom.append(l._innerDom),l._heartSize={width:Number.parseInt(.05*n.width),height:2*Math.ceil(Number.parseInt(.8*n.height)/2)},l._bindEvent(),l._sizeInit(),l._valInit(),l}return _inherits(a,e),_createClass(a,[{key:"_bindEvent",value:function(){var r=this,i=void 0,s=void 0,o=void 0,l=void 0,a=null;this._sliderDom[0].addEventListener("mousedown",function(e){r._heartDom[0].style.transition="none",r._sliderDom[0].style.transition="none",i=e.clientX-r._sliderDom[0].offsetLeft,s=e.clientY-r._sliderDom[0].offsetLeft,o=r._sliderDom[0],l=r._heartDom[0],a=r._outerDom[0].offsetWidth-r._sliderDom[0].offsetWidth/2;var t=function(e){if(e.preventDefault(),r._direction){var t=e.clientX-i;t<0?t=0:a<t&&(t=a),o.style.left=t+"px",l.style.width=t+"px"}else{var n=e.clientY-s;n<0?n=0:a<n&&(n=a),o.style.left=n+"px",l.style.width=n+"px"}r._value=Number.parseInt(100*l.offsetWidth/a),r.runEvent(base.EventBase.CHANGE,r)};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",function(e){r.runEvent(base.EventBase.CHANGE,r),o=l=null,document.removeEventListener("mousemove",t,!1),e.preventDefault()},!1)},!1),this._outerDom[0].addEventListener("mousedown",function(e){a=r._outerDom[0].offsetWidth-r._sliderDom[0].offsetWidth/2;var t=e.clientX-r._heartDom[0].getBoundingClientRect().left<0?0:e.clientX-r._heartDom[0].getBoundingClientRect().left,n=e.clientY-r._heartDom[0].getBoundingClientRect().top<0?0:e.clientY-r._heartDom[0].getBoundingClientRect().top,i=r._sliderDom[0].offsetLeft,s=i+r._sliderDom[0].offsetWidth,o=function(e,t){return 100<Number.parseInt(100*e/t)?100:0<Number.parseInt(100*e/t)?Number.parseInt(100*e/t):0};r._direction?(t<i||s<t)&&(r._sliderDom[0].style.left=t+"px",r._heartDom[0].style.width=t+"px",r._heartDom[0].style.transition="0.5s",r._sliderDom[0].style.transition="0.5s",r._value=o(t,a)):(n<i||s<n)&&(r._sliderDom[0].style.left=n+"px",r._heartDom[0].style.width=n+"px",r._heartDom[0].style.transition="0.5s",r._sliderDom[0].style.transition="0.5s",r._value=o(n,a)),r.runEvent(base.EventBase.CHANGE,r)})}},{key:"_sizeInit",value:function(){var e=["width:"+this._innerSize.width+"px;height:"+this._innerSize.height+"px;","width:"+this._outerSize.width+"px;height:"+this._outerSize.height+"px;","width:"+this._sliderSize.width+"px;height:"+this._sliderSize.height+"px;","width:"+this._heartSize.width+"px;height:"+this._heartSize.height+"px;"];this._innerDom[0].style.cssText=e[0],this._outerDom[0].style.cssText=e[1],this._sliderDom[0].style.cssText=e[2],this._heartDom[0].style.cssText=e[3],this._innerDom.addClass("normal_inner"),this._outerDom.addClass("normal_outer"),this._sliderDom.addClass("normal_slider"),this._heartDom.addClass("normal_heart"),this._direction||this._outerDom.addClass("VERTICAL_SHOW"),this._heartShow||this._heartDom.addClass("HEART_SHOW")}},{key:"_valInit",value:function(){this._heartSize.width=this._innerSize.width*this._value/100,this._heartDom[0].style.width=this._value+"%";var e=this._sliderSize.width/2;this._sliderDom[0].style.left=Number.parseInt(this._heartSize.width-e)+"px"}},{key:"destorySelfProp",value:function(){this._direction=null,this._value=null,this._innerSize=null,this._outerSize=null,this._sliderSize=null,this._heartShow=null,this._outerDom=null,this._innerDom=null,this._heartDom=null,this._sliderDom=null,this._heartSize=null}},{key:"destorySelfEvent",value:function(){this._sliderDom.off("mousedown"),this._outerDom.off("mousedown")}},{key:"change",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,e)}},{key:"width",get:function(){return this._outerDom[0].offsetWidth},set:function(e){return null}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction=Boolean(e),this._direction?this._outerDom.removeClass("VERTICAL_SHOW"):this._outerDom.addClass("VERTICAL_SHOW")}},{key:"value",get:function(){return this._value},set:function(e){this._value=100<Number.parseInt(e)?100:Number.parseInt(e)<0?0:Number.parseInt(e),this._valInit(),this.runEvent(base.EventBase.CHANGE,this)}},{key:"outerSize",get:function(){return this._outerSize},set:function(e){var t=[e.width,e.height];this._outerSize.width=t[0],this._outerSize.height=t[1],this._outerDom[0].style.cssText="width:"+this._outerSize.width+"px;height:"+this._outerSize.height+"px;",this._outerDom.addClass("normal_outer")}},{key:"innerSize",get:function(){return this._innerSize},set:function(e){var t=[e.width,e.height];this._innerSize.width=t[0],this._innerSize.height=t[1],this._innerDom[0].style.cssText="width:"+this._innerSize.width+"px;height:"+this._innerSize.height+"px;",this._innerDom.addClass("normal_inner")}},{key:"sliderSize",get:function(){return this._sliderSize},set:function(e){var t=[e.width,e.height];this._sliderSize.width=t[0],this._outerSize.height=t[1],this._sliderDom[0].style.cssText="width:"+this._sliderSize.width+"px;height:"+this._sliderSize.height+"px;",this._sliderDom.addClass("normal_slider")}},{key:"heartShow",get:function(){return this._heartShow},set:function(e){this._heartShow=Boolean(e),this._heartShow?this._heartDom.removeClass("HEART_SHOW"):this._heartDom.addClass("HEART_SHOW")}},{key:"innerStyle",set:function(e){this._innerDom.addClass(e)}},{key:"outerStyle",set:function(e){this._outerDom.addClass(e)}},{key:"sliderStyle",set:function(e){this._sliderDom.addClass(e)}},{key:"heartStyle",set:function(e){this._heartDom.addClass(e)}},{key:"dom",get:function(){return this._outerDom[0]}}]),a}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.TextBox=function(e){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"string",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];_classCallCheck(this,s);var i=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));if(i._val=t,!control.TextBox.textType[e])throw new TypeError("应该输入有效的类型(float,int,string,password,text,number)");return i._regex="",i._testReg=!1,i._showType=e,i._inputDom=$("<input type='"+control.TextBox.textType[i._showType]+"' value='"+i._val+"'/>"),i._html=$("<span></span>"),i._html.append(i._inputDom),i._bindEvent(),i}return _inherits(s,e),_createClass(s,[{key:"destroySelfEvent",value:function(){this._inputDom.off("mousewheel"),this._inputDom.off("change"),this._inputDom.off("input propertychange")}},{key:"destroySelfProp",value:function(){this._val=null,this._regex=null,this._showType=null}},{key:"_bindEvent",value:function(){var n=this;this._inputDom.on("mousewheel",function(e){if("number"===n._inputDom.attr("type")){var t=parseInt(n._inputDom.attr("value"));n._inputDom.attr("value",t+parseInt(e.originalEvent.wheelDeltaY/120))}}),this._inputDom.on("change",function(e){n._val=e.target.value,n.runEvent(base.EventBase.CHANGE,n)}),this._inputDom.on("input propertychange",function(e){n._val=e.target.value,n.runEvent(base.EventBase.CHANGE,n)})}},{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"showType");this._inputDom.attr("type",control.TextBox.textType[n]);var i=utils.Dom.getAttr(e,"showValue");this._inputDom.attr("value",i);var s=utils.Dom.getAttr(e,"minValue");this._inputDom.attr("min",s);var o=utils.Dom.getAttr(e,"maxValue");this._inputDom.attr("max",o);var r=utils.Dom.getAttr(e,"testReg");this._testReg=r}},{key:"testReg",get:function(){return this._testReg},set:function(e){this._testReg=e}},{key:"regex",get:function(){return this._regex},set:function(e){this._regex=e}},{key:"showType",get:function(){return this._showType},set:function(e){this._inputDom.attr("type",control.TextBox.textType[e]),this._showType=e}},{key:"showValue",get:function(){return this._val},set:function(e){this._val=e,this._inputDom.attr("value",e)}},{key:"minValue",get:function(){return"number"!==this._inputDom.attr("type")?NaN:parseInt(this._inputDom.attr("min"))},set:function(e){"number"===this._inputDom.attr("type")&&this._inputDom.attr("min",e)}},{key:"maxValue",get:function(){return"number"!==this._inputDom.attr("type")?NaN:parseInt(this._inputDom.attr("max"))},set:function(e){"number"===this._inputDom.attr("type")&&this._inputDom.attr("max",e)}},{key:"dom",get:function(){return this._html[0]}}]),s}(control.Base),control.TextBox.textType={float:"number",int:"number",string:"text",password:"password",text:"text",number:"number"};var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.Tree=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.name="Tree",t.version="1.0.0",t.author="taiduo",t._rootNode=null,t._selectItem=null,t._selectPrevItem=null,t._selectClickItem=null,t._html=$('<div class="controlTree"></div>'),t._bindEvent(),t}return _inherits(n,e),_createClass(n,[{key:"addChild",value:function(e){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(e._parent=this)._childList.push(e),e.dom&&this.dom&&this.dom.appendChild(e.dom),e.setControllerItem(e.guid,e.guid),(e._rootNode=this).eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"_bindEvent",value:function(){this.html.on("click",function(e){this._stopEvent(e)||this.runEvent(base.EventBase.CLICK,this)}.bind(this)),this.html.on("dblclick",function(e){this._stopEvent(e)||this.runEvent(base.EventBase.DBLCLICK,this)}.bind(this)),this.html.on("contextmenu",function(e){this._stopEvent(e)||this.runEvent(base.EventBase.CONTEXTMENU,this)}.bind(this));var t=this;this.html.on("mousedown",function(e){this._stopEvent(e)||(t.runEvent(base.EventBase.DRAGBEGIN,t),document.onmousemove=function(e){t.runEvent(base.EventBase.DRAGMOVE,t)},document.onmouseup=function(){t.runEvent(base.EventBase.DRAGEND,t),document.onmousemove=null,document.onmouseup=null})}.bind(this))}},{key:"_stopEvent",value:function(e){var t=e||window.event;if(t.target||t.srcElement,-1!=e.target.className.indexOf("spreadList"))return 1}},{key:"destroySelfEvent",value:function(){this._html.off("click"),this._html.off("dblclick"),this._html.off("contextmenu"),this._html.off("mousedown")}},{key:"destroySelfProp",value:function(){this._selectItem=null,this._selectPrevItem=null,this._selectClickItem=null,this._html=null}},{key:"selectItem",set:function(e){this._selectItem=e},get:function(){return this._selectItem}},{key:"selectPrevItem",set:function(e){this._selectPrevItem=e},get:function(){return this._selectPrevItem}},{key:"dom",get:function(){var e="";return this.html&&(e=this.html[0]),e}}],[{key:"initTargetNd",value:function(e,t,n){var i=window.currentTreeItem||null;"click"==n?(t._selectClickItem&&(t.selectPrevItem=t._selectClickItem),t._selectClickItem=i):t.selectItem=i}}]),n}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.TreeItem=function(e){function r(e,t){_classCallCheck(this,r);var n=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));n.name="TreeItem",n.version="1.0.0",n.author="taiduo",n._config=t||{},n._icon=n._config.icon||null,n._text=n._config.text||null,n._spreadBtn=n._config.spreadBtn||null;var i=control.TreeItem;n._rootNode=null,n._treeIconNd=$(i.createIcon(n._icon)),n._treeSpreadBtnNd=$(i.createSpreadBtn(n._spreadBtn)),n._treeTextNd=$("<span>"+n._text+"</span>");var s=$('<div class="controlTree-context" ></div>');s.prepend(n._treeIconNd),s.append(n._treeTextNd),s.append(n._treeSpreadBtnNd),n._tree=s;var o=$('<div class="controlTree-main"></div>');return o.append(s),n._html=o,n._bindClick(),n._bindEvent(),n}return _inherits(r,e),_createClass(r,[{key:"addChild",value:function(e){this.eventCycle.runEvent(base.EventBase.LOAD_BEFORE),(e._parent=this)._childList.push(e),e.dom&&this.dom&&this.dom.appendChild(e.dom),e.setControllerItem(e.guid,e.guid),e._rootNode=this._rootNode,this.eventCycle.runEvent(base.EventBase.LOAD_COMPLETE)}},{key:"reflexPropSelf",value:function(e,t){var n=utils.Dom.getAttr(e,"icon");this.icon=n;var i=utils.Dom.getAttr(e,"spreadBtn");this.spreadBtn=i}},{key:"_bindClick",value:function(){var e=this._treeSpreadBtnNd;e&&e.on("click",function(e){this.spreadTree()}.bind(this))}},{key:"_bindEvent",value:function(){this.tree.on("click",function(){this.saveCurrent("click")}.bind(this)),this.tree.on("dblclick",function(){this.saveCurrent("dblclick")}.bind(this)),this.tree.on("contextmenu",function(){this.saveCurrent("contextmenu")}.bind(this)),this.tree.on("mousedown",function(){this.saveCurrent("mousedown"),document.onmousemove=function(e){},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}.bind(this))}},{key:"saveCurrent",value:function(e){var t=this._rootNode;"click"==e?(t._selectClickItem&&(t.selectPrevItem=t._selectClickItem),t._selectClickItem=this):t.selectItem=this}},{key:"spreadTree",value:function(){var e=this._treeSpreadBtnNd;e.hasClass("active")?(e.removeClass("active"),this.childList.forEach(function(e){e._html.show()})):(this.childList.forEach(function(e){e._html.hide()}),e.addClass("active"))}},{key:"treeStyle",value:function(e,t){e.constructor==Object?this.tree.css(e):this.tree.css(e,t)}},{key:"destroySelfEvent",value:function(){this._treeSpreadBtnNd.off("click"),this.tree.off("click"),this.tree.off("dblclick"),this.tree.off("contextmenu"),this.tree.off("mousedown")}},{key:"destroySelfProp",value:function(){this._config={},this._icon=null,this._text=null,this._spreadBtn=null,this._treeIconNd=null,this._treeSpreadBtnNd=null,this._treeTextNd=null,this._tree=null,this._html=null}},{key:"tree",set:function(e){this._tree=tree},get:function(){return this._tree}},{key:"text",set:function(e){this._text=e,this._treeTextNd.text(e)},get:function(){return this._text}},{key:"icon",set:function(e){this._icon=e,this._treeIconNd=$(control.TreeItem.createIcon(e)),this.tree.prepend(this._treeIconNd)}},{key:"spreadBtn",set:function(e){this._spreadBtn=e,this._treeSpreadBtnNd=$(control.TreeItem.createSpreadBtn(e)),this.tree.append(this._treeSpreadBtnNd),this._bindClick()}},{key:"dom",get:function(){var e="";return this.html&&(e=this.html[0]),e}}],[{key:"createIcon",value:function(e){var t=null;return e&&(t="<img src="+{rhombus:"./images/rhombus.png",triangleRight:"./images/triangle-right.png"}[e]+"    />"),t}},{key:"createSpreadBtn",value:function(e){var t=null;return e&&(t='<span class="spreadList"></span>'),t}}]),r}(control.Base);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}control.UploadFile=function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"选择文件",t=arguments[1];_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._text="",n.name="Box",n.version="1.0.0",n.author="heshang",n._box=$("<div></div>"),n._html=$('<span class="UploadFile_color UploadFile_inline">'+e+"</span>"),n._submit=$('<span class="UploadFile_color UploadFile_inline">上传</span>'),n._tips=$("<div></div>"),n._box.css("margin","33px"),n._tips.css("marginTop","33px"),n._input=$('<input type="file"/>'),n._box.append(n._html),n._box.append(n._submit),n._box.append(n._tips),n._multiple=!1,n._upFileType=[],n._allowSubmit=!1,n._uploadIndex=0,n._maxSize=null,n.allowSubmit=!1,n.text=e,n._bindEvent(),n}return _inherits(i,e),_createClass(i,[{key:"_bindEvent",value:function(){var e=this;this._html.on("click",function(){e._input[0].click()}),this._submit.on("click",function(){e._submitFile()}),this._input.on("change",function(){e._selectedFile()})}},{key:"_uploadFinish",value:function(){this.allowSubmit=!1}},{key:"_uploadFile",value:function(){var s=this;if(this._uploadIndex>=this._input[0].files.length)this._uploadFinish();else{var e,o=this._input[0].files[this._uploadIndex],r=new FormData;e=window.location.origin.indexOf("66rpg.com")<=-1?"http://role6-test-www.66rpg.com":window.location.origin,utils.Ajax.get(e+"/ajax/OssAuth/getUploadTempAuth",null,function(e){var i=e.data,t=new FileReader;t.readAsArrayBuffer(o),t.onload=function(e){var t=md5(e.target.result),n="upload/"+t.substr(0,2)+"/"+t;"audio/mp3"===o.type&&(n+=".mp3"),r.append("key",n),r.append("policy",i.policy),r.append("OSSAccessKeyId",i.accessid),r.append("signature",i.signature),r.append("x-oss-security-token",i.token),r.append("name",o.name),r.append("file",o),utils.Ajax.postFormData("//cg-back.cgyouxi.com/",r,function(e){s._tips.append($("<div>文件:<b>"+o.name+"</b>上传成功,链接: <b>http://"+i.cdn+"/"+n+"</b></div>")),s._nextUpLoad()},function(){s._tips.append($('<div>文件:<b style="color:red">'+o.name+"</b>上传失败。请重试。</div>")),s._nextUpLoad()})}})}}},{key:"_nextUpLoad",value:function(){this._uploadIndex++,this._uploadFile()}},{key:"_submitFile",value:function(){this._allowSubmit&&(this._uploadIndex=0,this._tips.html(""),this._uploadFile())}},{key:"_selectedFile",value:function(){if(this.allowSubmit=!1,this._tips.html(""),0<this._input[0].files.length)return this.checkFileType?(this.allowSubmit=!0,void this._selectedFileTips()):void this._typeError();this.allowSubmit=!1}},{key:"_typeError",value:function(){alert("请检查文件类型、文件大小。")}},{key:"_selectedFileTips",value:function(){this._tips.html("");for(var e=0;e<this._input[0].files.length;e++)this._tips.append($("<div>已选择文件:<b>"+this._input[0].files[e].name+"</b></div>"))}},{key:"maxSize",set:function(e){this._maxSize=e},get:function(){return this._maxSize}},{key:"checkFileType",get:function(){for(var e=0;e<this._input[0].files.length;e++){var t=this._input[0].files[e].type;if(this.maxSize&&0<this.maxSize&&this._input[0].files[e].size>=this.maxSize)return!1;if(-1<this._upFileType.indexOf(t.toLowerCase()))return!0}return!1}},{key:"allowSubmit",set:function(e){(this._allowSubmit=e)?this._submit.removeClass("UploadFile_disable").addClass("UploadFile_color"):this._submit.removeClass("UploadFile_color").addClass("UploadFile_disable")}},{key:"upFileType",set:function(e){this._upFileType=e}},{key:"multiple",set:function(e){(this._multiple=e)?this._input.attr("multiple","true"):this._input.removeAttr("multiple")},get:function(){return this._multiple}},{key:"change",set:function(e){this._stop?this._stop=!1:this.onEvent(base.EventBase.CHANGE,e)}},{key:"text",set:function(e){this._text=e},get:function(){return this._text}},{key:"dom",get:function(){return this._box[0]}}]),i}(control.Base);